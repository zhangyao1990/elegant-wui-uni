var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,o=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))u.call(a,t)&&i(e,t,a[t]);return e},n=(e,l)=>a(e,t(l));import{d as r,z as d,r as c,ax as m,L as f,c as g,v as p,a as v,g as h,w as y,x as _,ao as b,B as w,s as z,i as x,O as k,n as $,h as j,F as O,e as I,f as P,k as V}from"./index-7V_Oz7o2.js";import{m as C,l as S,t as X,k as A,c as D,E as F,ae as W,af as Y,e as B,o as E,a as H,h as L,_ as R}from"./page-wraper.XTDu10FG.js";import{_ as G}from"./wui-button.CpEmAov2.js";import{_ as M}from"./demo-block.Dak0lv3M.js";import{_ as T}from"./wui-badge.Bbz0hbKN.js";import{_ as U}from"./wui-cell-group.SQjrhoFo.js";import"./useChildren.CE-WdV6D.js";const N=n(o({},D),{content:S(""),image:S(""),imageHeight:C(100),imageWidth:C(100),gutterX:C(0),gutterY:C(0),width:C(100),height:C(100),fullScreen:A(!0),color:S("#8c8c8c"),size:C(14),fontStyle:S("normal"),fontWeight:X("normal"),fontFamily:S("PingFang SC"),rotate:C(-25),zIndex:C(1100),opacity:C(.5)}),Z=H(r(n(o({},{name:"wui-watermark",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:N,setup(e){const a=e;d((()=>a),(()=>{n.value=!0,i.value=(a.height+a.gutterY)*u.value,o.value=(a.width+a.gutterX)*u.value,k((()=>{j()}))}),{deep:!0});const t=c(`water${F()}`),l=c(""),s=c(m("createOffscreenCanvas")&&Boolean(uni.createOffscreenCanvas)),u=c(f().pixelRatio),i=c((a.height+a.gutterY)*u.value),o=c((a.width+a.gutterX)*u.value),n=c(!0),r=g((()=>{let e="wui-watermark";return a.fullScreen&&(e=`${e} is-fullscreen`),`${e} ${a.customClass}`})),$=g((()=>{const e={opacity:a.opacity,backgroundSize:B(a.width+a.gutterX)};return l.value&&(e.backgroundImage=`url('${l.value}')`),`${E(e)};${a.customStyle}`}));function j(){n.value=!1;const{width:e,height:t,color:s,size:i,fontStyle:o,fontWeight:r,fontFamily:d,content:c,rotate:m,gutterX:f,gutterY:g,image:p,imageHeight:v,imageWidth:h}=a;!function(e,a,t,s,i,o,n,r,d,c,m,f,g,p){const v=(a+m)*u.value,h=(e+c)*u.value,y=e*u.value,_=a*u.value,b=s*u.value;!function(e,a,t,s,i,o,n,r,d,c,m,f,g,p){const v=document.createElement("canvas"),h=v.getContext("2d");if(v.setAttribute("width",`${a}px`),v.setAttribute("height",`${e}px`),h)if(f){!function(e,a,t,s,i,o,n,r,d){return c=this,m=null,f=function*(){e.translate(n/2,r/2),e.rotate(Math.PI/180*Number(o)),a.crossOrigin="anonymous",a.referrerPolicy="no-referrer",W(t)?a.src=t:a.src=Y(t,{timestamp:`${(new Date).getTime()}`}),a.onload=()=>{e.drawImage(a,-i*u.value/2,-s*u.value/2,i*u.value,s*u.value),e.restore(),l.value=d.toDataURL()}},new Promise(((e,a)=>{var t=e=>{try{s(f.next(e))}catch(t){a(t)}},l=e=>{try{s(f.throw(e))}catch(t){a(t)}},s=a=>a.done?e(a.value):Promise.resolve(a.value).then(t,l);s((f=f.apply(c,m)).next())}));var c,m,f}(h,new Image,f,g,p,i,t,s,v)}else!function(e,a,t,s,u,i,o,n,r,d,c){e.textBaseline="middle",e.textAlign="center",e.translate(t/2,t/2),e.rotate(Math.PI/180*u),e.font=`${n} normal ${r} ${i}px/${s}px ${o}`,e.fillStyle=d,e.fillText(a,0,0),e.restore(),l.value=c.toDataURL()}(h,m,t,s,i,o,n,r,d,c,v);else console.error("无法获取canvas上下文，请确认当前环境是否支持canvas")}(v,h,y,_,d,b,n,i,o,t,r,f,g,p)}(e,t,s,i,o,r,d,c,m,f,g,p,v,h)}return p((()=>{j()})),(e,a)=>{const l=b,u=x;return h(),v(u,{class:z(r.value),style:w($.value)},{default:y((()=>[!s.value&&n.value?(h(),v(l,{key:0,type:"2d",style:w({height:i.value+"px",width:o.value+"px",visibility:"hidden"}),"canvas-id":t.value,id:t.value},null,8,["style","canvas-id","id"])):_("",!0)])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-d2e0ee03"]]),q=H(r({__name:"Index",setup(e){const a=c(!1),t=g((()=>a.value?"https://isdm-public.oss-cn-hangzhou.aliyuncs.com/image/vue-logo.png":""));function l(e){a.value=e}return(e,a)=>{const s=I(P("wui-watermark"),Z),u=I(P("wui-button"),G),i=I(P("demo-block"),M),o=I(P("wui-badge"),T),n=I(P("wui-cell"),L),r=I(P("wui-cell-group"),U),d=I(P("page-wraper"),R),c=x;return h(),$(O,null,[j(s,{image:t.value,width:130,height:140,"image-width":38,content:"elegant-wui-uni","image-height":38,opacity:.5},null,8,["image"]),j(c,null,{default:y((()=>[j(d,null,{default:y((()=>[j(i,{title:"基础用法"},{default:y((()=>[j(u,{onClick:a[0]||(a[0]=e=>l(!1)),plain:""},{default:y((()=>[V("文字水印")])),_:1}),j(u,{onClick:a[1]||(a[1]=e=>l(!0)),plain:""},{default:y((()=>[V("图片水印")])),_:1})])),_:1}),j(i,{title:"展示效果"},{default:y((()=>[j(o,{"custom-class":"badge",modelValue:200,max:99},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("评论")])),_:1})])),_:1}),j(o,{"custom-class":"badge",modelValue:200,max:10},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("回复")])),_:1})])),_:1})])),_:1}),j(i,{title:"局部水印"},{default:y((()=>[j(s,{opacity:.8,image:"https://isdm-public.oss-cn-hangzhou.aliyuncs.com/image/vue-logo.png","image-width":38,"image-height":38,"full-screen":!1}),j(o,{"custom-class":"badge",modelValue:12},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("评论")])),_:1})])),_:1}),j(o,{"custom-class":"badge",modelValue:3,"bg-color":"pink"},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("回复")])),_:1})])),_:1}),j(o,{"custom-class":"badge",modelValue:1,type:"primary"},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("评论")])),_:1})])),_:1}),j(o,{"custom-class":"badge",modelValue:2,type:"warning"},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("回复")])),_:1})])),_:1}),j(o,{"custom-class":"badge",modelValue:1,type:"success"},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("评论")])),_:1})])),_:1}),j(o,{"custom-class":"badge",modelValue:2,type:"info"},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("回复")])),_:1})])),_:1}),j(r,{border:""},{default:y((()=>[j(n,{size:"large",title:"标题文字",value:"内容"}),j(n,{title:"标题文字",value:"内容",size:"large",icon:"setting","is-link":""}),j(n,{size:"large",title:"标题文字",label:"描述信息",value:"内容"}),j(n,{size:"large",title:"标题文字",value:"内容"}),j(n,{title:"标题文字",value:"内容",size:"large",icon:"setting","is-link":""}),j(n,{size:"large",title:"标题文字",label:"描述信息",value:"内容"})])),_:1})])),_:1}),j(i,{title:"展示效果"},{default:y((()=>[j(o,{"custom-class":"badge",modelValue:"new"},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("评论")])),_:1})])),_:1}),j(o,{"custom-class":"badge",modelValue:"hot"},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("回复")])),_:1})])),_:1})])),_:1}),j(i,{title:"展示效果"},{default:y((()=>[j(o,{"custom-class":"badge","is-dot":""},{default:y((()=>[V("数据查询")])),_:1}),j(o,{"custom-class":"badge","is-dot":""},{default:y((()=>[j(u,{round:!1,type:"info",size:"small"},{default:y((()=>[V("回复")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-25e74c1f"]]);export{q as default};
