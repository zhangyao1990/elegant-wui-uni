var l=(l,e,a)=>new Promise(((u,o)=>{var n=l=>{try{m(a.next(l))}catch(e){o(e)}},t=l=>{try{m(a.throw(l))}catch(e){o(e)}},m=l=>l.done?u(l.value):Promise.resolve(l.value).then(n,t);m((a=a.apply(l,e)).next())}));import{f as e,_ as a,g as u}from"./page-wraper.DMME2CXH.js";import{d as o,v as n,r as t,a as m,w as s,e as d,f as c,g as r,h as v,i,k as p,t as V}from"./index-CnRAlpd-.js";import{u as f,_ as g}from"./useColPickerData.Ca-s302e.js";import{_ as b}from"./wui-cell-group.Doe8cqfe.js";import{_ as h}from"./demo-block.BWMqEgaZ.js";import{_}from"./wui-button.Bcr_H9ae.js";import"./wui-action-sheet.CrdI8UKt.js";import"./useTranslate.DCsJG8gA.js";import"./useChildren.B4reFkwq.js";const x=o({__name:"Index",setup(o){const{colPickerData:x,findChildrenByCode:U}=f(),y=e();n((()=>l(this,null,(function*(){y.loading("数据加载中"),yield X(),y.close(),j.value=["150000","150100","150121"]}))));const w=t([]),j=t([]),k=t(["130000","130200","130204"]),C=t([]),I=t([]),P=t(["130000","130200","130204"]),T=t([]),D=t([]),q=t([]),z=t([]),A=t([]),B=t([]),G=t([]),M=t([]),S=t([]),E=t(""),F=t([x.map((l=>({value:l.value,label:l.text})))]),H=t([]),J=t([x.map((l=>({value:l.value,label:l.text}))),U(x,"130000").map((l=>({value:l.value,label:l.text}))),U(x,"130200").map((l=>({value:l.value,label:l.text})))]),K=t([x.map((l=>({value:l.value,label:l.text,disabled:"140000"===l.value})))]),L=t([x.map((l=>({value:l.value,label:l.text,disabled:"140000"===l.value,tip:"140000"===l.value?"该地区无货，暂时无法选择":"150000"===l.value?"该地区配送时间可能较长":""})))]),N=({selectedItem:l,resolve:e,finish:a})=>{const u=U(x,l.value);u&&u.length?e(u.map((l=>({value:l.value,label:l.text})))):a()},O=e=>l(this,[e],(function*({selectedItem:l,resolve:e,finish:a}){yield X(.3);const u=U(x,l.value);u&&u.length?e(u.map((l=>({value:l.value,label:l.text})))):a()})),Q=({selectedItem:l,resolve:e,finish:a})=>{setTimeout((()=>{if(Math.random()>.7)return a(!1),void y.error("数据请求失败，请重试");const u=U(x,l.value);u&&u.length?e(u.map((l=>({value:l.value,label:l.text})))):a()}),300)},R=l=>l[l.length-2].label+"-"+l[l.length-1].label,W=(l,e,a)=>{parseInt(String(l[2]))>12e4?(y.error("该地区库存不足"),a(!1)):a(!0)};function X(l=1){return new Promise((e=>{setTimeout((()=>{e(!0)}),1e3*l)}))}function Y({selectedItems:l}){E.value=l.map((l=>l.label)).join("")}function Z({value:l}){console.log(l)}return(l,e)=>{const o=d(c("wui-toast"),u),n=d(c("wui-col-picker"),g),t=d(c("wui-cell-group"),b),f=i,x=d(c("demo-block"),h),U=d(c("wui-button"),_),y=d(c("page-wraper"),a);return r(),m(y,null,{default:s((()=>[v(o),v(f,{style:{margin:"20px 0"}},{default:s((()=>[v(t,{border:""},{default:s((()=>[v(n,{label:"选择地址",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=l=>w.value=l),columns:F.value,"column-change":N,onConfirm:Z},null,8,["modelValue","columns"]),v(n,{label:"初始选项",modelValue:j.value,"onUpdate:modelValue":e[1]||(e[1]=l=>j.value=l),columns:H.value,"column-change":O,"auto-complete":""},null,8,["modelValue","columns"]),v(n,{label:"禁用",disabled:"",modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value=l),columns:J.value,"column-change":N},null,8,["modelValue","columns"]),v(n,{label:"只读",readonly:"",modelValue:k.value,"onUpdate:modelValue":e[3]||(e[3]=l=>k.value=l),columns:J.value,"column-change":N},null,8,["modelValue","columns"]),v(n,{label:"禁用选项",modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=l=>C.value=l),columns:K.value,"column-change":N},null,8,["modelValue","columns"]),v(n,{label:"选项提示信息",modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=l=>I.value=l),columns:L.value,"column-change":N},null,8,["modelValue","columns"]),v(n,{label:"展示格式化",modelValue:P.value,"onUpdate:modelValue":e[6]||(e[6]=l=>P.value=l),columns:J.value,"column-change":N,"display-format":R},null,8,["modelValue","columns"]),v(n,{label:"标题",modelValue:T.value,"onUpdate:modelValue":e[7]||(e[7]=l=>T.value=l),title:"选择地址",columns:F.value,"column-change":N},null,8,["modelValue","columns"]),v(n,{label:"before-confirm",modelValue:D.value,"onUpdate:modelValue":e[8]||(e[8]=l=>D.value=l),columns:F.value,"column-change":N,"before-confirm":W},null,8,["modelValue","columns"]),v(n,{label:"错误",error:"",modelValue:q.value,"onUpdate:modelValue":e[9]||(e[9]=l=>q.value=l),columns:F.value,"column-change":N},null,8,["modelValue","columns"]),v(n,{label:"必填",required:"",modelValue:z.value,"onUpdate:modelValue":e[10]||(e[10]=l=>z.value=l),columns:F.value,"column-change":N},null,8,["modelValue","columns"])])),_:1})])),_:1}),v(x,{title:"一般column-change是个异步获取数据的操作，触发column-change组件会有默认loading，数据响应后关闭loading",transparent:""},{default:s((()=>[v(n,{label:"选择地址",modelValue:A.value,"onUpdate:modelValue":e[11]||(e[11]=l=>A.value=l),columns:F.value,"column-change":Q},null,8,["modelValue","columns"])])),_:1}),v(x,{title:"label不传",transparent:""},{default:s((()=>[v(n,{modelValue:B.value,"onUpdate:modelValue":e[12]||(e[12]=l=>B.value=l),columns:F.value,"column-change":N},null,8,["modelValue","columns"])])),_:1}),v(x,{title:"大小",transparent:""},{default:s((()=>[v(n,{label:"选择地址",modelValue:G.value,"onUpdate:modelValue":e[13]||(e[13]=l=>G.value=l),size:"large",columns:F.value,"column-change":N},null,8,["modelValue","columns"])])),_:1}),v(x,{title:"值靠右展示",transparent:""},{default:s((()=>[v(n,{label:"选择地址","align-right":"",modelValue:M.value,"onUpdate:modelValue":e[14]||(e[14]=l=>M.value=l),columns:F.value,"column-change":N},null,8,["modelValue","columns"])])),_:1}),v(x,{title:"自定义选择器",transparent:""},{default:s((()=>[v(f,{style:{"margin-left":"15px"}},{default:s((()=>[v(f,{style:{"margin-bottom":"10px"}},{default:s((()=>[p("当前选中项: "+V(E.value),1)])),_:1}),v(n,{modelValue:S.value,"onUpdate:modelValue":e[15]||(e[15]=l=>S.value=l),"use-default-slot":"",columns:F.value,"column-change":N,style:{display:"inline-block"},onConfirm:Y},{default:s((()=>[v(U,null,{default:s((()=>[p("选择地址")])),_:1})])),_:1},8,["modelValue","columns"])])),_:1})])),_:1})])),_:1})}}});export{x as default};
