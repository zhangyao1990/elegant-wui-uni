var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,u=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,r=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&u(e,a,l[a]);if(t)for(var a of t(l))s.call(l,a)&&u(e,a,l[a]);return e},c=(e,t)=>l(e,a(t));import{u as i,_ as n}from"./wui-message-box.O9sM5bOC.js";import{d,r as m,c as v,z as p,Z as f,L as y,v as w,_,H as h,a as V,g as b,w as k,h as x,ao as g,B as j,i as O,A as S,D as P,k as C,t as z,s as F,ap as I,e as L,f as U}from"./index-7V_Oz7o2.js";import{c as M,k as E,l as T,m as W,E as $,e as B,o as D,x as G,a as H,_ as R}from"./page-wraper.XTDu10FG.js";import{_ as A}from"./demo-block.Dak0lv3M.js";import{_ as Z}from"./wui-button.CpEmAov2.js";import"./wui-input.C94vwexm.js";import"./useTranslate.NU6YixkU.js";const q=c(r({},M),{modelValue:W(0),size:W(100),color:{type:[String,Object],default:"#4d80f0"},layerColor:T("#EBEEF5"),fill:String,speed:W(50),text:String,strokeWidth:W(10),strokeLinecap:T("round"),clockwise:E(!0)}),J=H(d(c(r({},{name:"wui-circle",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:q,setup(e){const l=2*Math.PI,a=-Math.PI/2,t=e,o=m(""),s=m(0),u=m(null),r=m(1),c=m(`wui-circle${$()}`);let i=null;const n=v((()=>t.size)),d=v((()=>t.strokeWidth)),L=v((()=>{const e={width:B(t.size),height:B(t.size)};return`${D(e)};`}));p((()=>t.modelValue),(()=>{!function(){if(t.speed<=0||t.speed>1e3)return void E(t.modelValue);T(),s.value=s.value||0;const e=()=>{u.value=setTimeout((()=>{s.value!==t.modelValue?(Math.abs(s.value-t.modelValue)<1?s.value=t.modelValue:s.value<t.modelValue?s.value+=1:s.value-=1,E(s.value),e()):T()}),1e3/t.speed)};e()}()}),{immediate:!0}),p((()=>t.size),(()=>{let e=setTimeout((()=>{E(s.value),clearTimeout(e)}),50)}),{immediate:!1}),p((()=>t.color),(()=>{E(s.value)}),{immediate:!1,deep:!0}),f((()=>{r.value=y().pixelRatio})),w((()=>{s.value=t.modelValue,E(s.value)})),_((()=>{T()}));const{proxy:U}=h();function M(e,l,a,o,s){let u=d.value;const r=n.value/2;s||(u/=2);const c=r-u/2;e.strokeStyle=l,e.setStrokeStyle(l),e.setLineWidth(u),e.setLineCap(t.strokeLinecap),e.beginPath(),e.arc(r,r,c,a,o,!t.clockwise),e.stroke(),s&&(e.setLineWidth(u),e.setFillStyle(s),e.fill())}function E(e){new Promise((e=>{if(i)return e(i);i=I(c.value,U),e(i)})).then((s=>{s.clearRect(0,0,n.value,n.value),function(e){M(e,t.layerColor,0,l,t.fill)}(s);const u=(r=e,Math.min(Math.max(r,0),100));var r;0!==u?function(e,s){const u=l*(s/100),r=t.clockwise?a+u:3*Math.PI-(a+u);if(G(t.color)){const l=e.createLinearGradient(n.value,0,0,0);Object.keys(t.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,t.color[e]))),o.value=l}else o.value=t.color;M(e,o.value,a,r)}(s,u):function(e){const a=d.value,s=n.value/2;if(G(t.color)){const l=e.createLinearGradient(n.value,0,0,0);Object.keys(t.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,t.color[e]))),o.value=l}else o.value=t.color;e.beginPath(),e.arc(s,a/4,a/4,0,l),e.setFillStyle(o.value),e.fill()}(s),s.draw()}))}function T(){u.value&&clearTimeout(u.value)}return(e,l)=>{const a=g,t=O,o=P;return b(),V(t,{class:F(`wui-circle ${e.customClass}`),style:j(e.customStyle)},{default:k((()=>[x(a,{width:n.value,height:n.value,style:j(L.value),id:c.value,"canvas-id":c.value},null,8,["width","height","style","id","canvas-id"]),e.text?(b(),V(o,{key:1,class:"wui-circle__text"},{default:k((()=>[C(z(e.text),1)])),_:1})):(b(),V(t,{key:0,class:"wui-circle__text"},{default:k((()=>[S(e.$slots,"default",{},void 0,!0)])),_:3}))])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-c6effe4f"]]),K=H(d({__name:"Index",setup(e){const l=m(20),a={0:"red",100:"white"};function t(){l.value<100&&(l.value+=10)}function o(){l.value>0&&(l.value-=10)}const s=i();function u(){s.alert("操作成功")}return(e,s)=>{const r=L(U("wui-message-box"),n),c=L(U("wui-circle"),J),i=L(U("demo-block"),A),d=O,m=L(U("wui-button"),Z),v=L(U("page-wraper"),R);return b(),V(d,{class:"circle"},{default:k((()=>[x(v,null,{default:k((()=>[x(r),x(i,{title:"基础用法"},{default:k((()=>[x(c,{"custom-class":"custom-circle",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),text:l.value+"%"},null,8,["modelValue","text"])])),_:1}),x(i,{title:"样式定制"},{default:k((()=>[x(c,{"custom-class":"custom-circle",modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value=e),"stroke-width":6,text:"宽度定制"},null,8,["modelValue"]),x(c,{"custom-class":"custom-circle",modelValue:l.value,"onUpdate:modelValue":s[2]||(s[2]=e=>l.value=e),"layer-color":"#eee",color:"#ee0a24",text:"颜色定制"},null,8,["modelValue"]),x(c,{"custom-class":"custom-circle",modelValue:l.value,"onUpdate:modelValue":s[3]||(s[3]=e=>l.value=e),color:a,text:"渐变色"},null,8,["modelValue"]),x(c,{"custom-class":"custom-circle",modelValue:l.value,"onUpdate:modelValue":s[4]||(s[4]=e=>l.value=e),color:"#07c160",clockwise:!1,text:"逆时针"},null,8,["modelValue"]),x(c,{"custom-class":"custom-circle",modelValue:l.value,"onUpdate:modelValue":s[5]||(s[5]=e=>l.value=e),size:120,text:"大小定制"},null,8,["modelValue"])])),_:1}),x(i,{title:"使用slot"},{default:k((()=>[x(c,{"custom-class":"custom-circle",modelValue:l.value,"onUpdate:modelValue":s[6]||(s[6]=e=>l.value=e),"stroke-width":6},{default:k((()=>[x(d,{style:{color:"red"}},{default:k((()=>[C(z(l.value)+"%",1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),x(i,null,{default:k((()=>[x(m,{"custom-style":"margin-right:24rpx",type:"primary",size:"small",onClick:t},{default:k((()=>[C("增加")])),_:1}),x(m,{type:"error",size:"small",onClick:o},{default:k((()=>[C("减少")])),_:1})])),_:1}),x(i,{title:"alert"},{default:k((()=>[x(m,{onClick:u},{default:k((()=>[C("alert")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-be78ac02"]]);export{K as default};
