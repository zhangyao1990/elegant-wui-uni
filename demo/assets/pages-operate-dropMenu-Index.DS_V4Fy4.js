var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,n=(o,l,t)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[l]=t,s=(e,o)=>{for(var l in o||(o={}))a.call(o,l)&&n(e,l,o[l]);if(t)for(var l of t(o))u.call(o,l)&&n(e,l,o[l]);return e},i=(e,t)=>o(e,l(t));import{u as d,_ as r}from"./wui-message-box.BwUamJHv.js";import{d as c,G as p,r as m,H as v,c as f,z as w,Z as b,J as _,a as g,x as y,g as h,w as V,h as x,A as k,i as C,n as $,F as j,p as K,s as S,D as z,k as O,t as T,B as I,L as P,e as U,f as N,u as E,K as A}from"./index-CnRAlpd-.js";import{c as B,m as D,k as F,l as H,z as M,J as Q,q as G,d as L,w as J,b as q,D as Z,n as R,a as W,E as X,p as Y,a8 as ee,_ as oe,h as le}from"./page-wraper.DMME2CXH.js";import{p as te,r as ae,c as ue}from"./clickoutside.CJmLG0WC.js";import{u as ne}from"./useChildren.B4reFkwq.js";import{_ as se}from"./demo-block.BWMqEgaZ.js";import{_ as ie}from"./wui-slider.CYhvbD_x.js";import{_ as de}from"./wui-button.Bcr_H9ae.js";import{w as re}from"./wui-sort-button.4dfzbO59.js";import"./wui-input.Dy8DxWjO.js";import"./useTranslate.DCsJG8gA.js";import"./useTouch.BqiP_qH2.js";const ce=Symbol("wui-drop-menu"),pe=i(s({},B),{zIndex:D(12),direction:H("down"),modal:F(!0),closeOnClickModal:F(!0),duration:D(200)}),me=i(s({},B),{customTitle:H(""),customIcon:H(""),modelValue:[String,Number],options:Q(),disabled:F(!1),iconName:H("check"),title:String,icon:H("arrow-down"),iconSize:M,beforeToggle:Function,valueKey:H("value"),labelKey:H("label"),tipKey:H("tip"),customPopupClass:H(""),customPopupStyle:H("")}),ve=W(c(i(s({},{name:"wui-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:me,emits:["update:modelValue","change","open","opened","close","closed"],setup(e,{expose:o,emit:l}){const t=e,a=l,u=p(G,null),n=m(!1),s=m(!1),i=m(),d=m(12),r=m(0),{parent:c}=L(ce),{proxy:P}=v(),U=f((()=>{let e="";return e=n.value&&c?"down"===c.props.direction?`top: calc(var(--window-top) + ${c.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${c.offset.value}px)`:"",e}));function N(){s.value&&(Z(t.beforeToggle)?t.beforeToggle({status:!1,resolve:e=>{e&&E()}}):E())}function E(){s.value&&(s.value=!1)}function A(){s.value||(Z(t.beforeToggle)?t.beforeToggle({status:!0,resolve:e=>{e&&B()}}):B())}function B(){n.value=!0,s.value=!0,c&&(r.value=Number(c.props.duration),i.value="down"===c.props.direction?"top":"bottom"),a("open")}function D(){n.value=!1,a("closed")}function F(){a("open")}function H(){a("opened")}function M(){a("close")}return w((()=>t.modelValue),(e=>{R(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[elegant-wui-uni] warning(wui-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),b((()=>{u&&u.pushToQueue?u.pushToQueue(P):te(P)})),_((()=>{u&&u.removeFromQueue?u.removeFromQueue(P):ae(P)})),o({getShowPop:function(){return s.value},open:A,close:N,toggle:function(){s.value?N():A()}}),(e,o)=>{const l=z,u=C;return n.value?(h(),g(u,{key:0,class:S(`wui-drop-item  ${e.customClass}`),style:I(`pointer-events: none; z-index: ${d.value}; ${U.value};${e.customStyle}`)},{default:V((()=>[x(J,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),"z-index":d.value,duration:r.value,position:i.value,"custom-style":`position: absolute; pointer-events: auto; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,modal:!1,"close-on-click-modal":!1,onBeforeEnter:F,onAfterEnter:H,onBeforeLeave:M,onAfterLeave:D},{default:V((()=>[e.options.length?(h(),g(u,{key:0},{default:V((()=>[(h(!0),$(j,null,K(e.options,((o,n)=>(h(),g(u,{key:n,onClick:e=>function(e){if(t.disabled)return;const{valueKey:o}=t,l=t.options[e],u=void 0!==l[o]?l[o]:l;a("update:modelValue",u),a("change",{value:u,selectedItem:l}),N()}(n),class:S("wui-drop-item__option "+((""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?"is-active":""))},{default:V((()=>[x(u,{class:S(`wui-drop-item__title ${e.customTitle}`)},{default:V((()=>[x(l,null,{default:V((()=>[O(T(o[e.labelKey]?o[e.labelKey]:o),1)])),_:2},1024),o[e.tipKey]?(h(),g(l,{key:0,class:"wui-drop-item__tip"},{default:V((()=>[O(T(o[e.tipKey]),1)])),_:2},1024)):y("",!0)])),_:2},1032,["class"]),(""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?(h(),g(q,{key:0,name:e.iconName,"custom-class":`wui-drop-item__icon ${e.customIcon}`},null,8,["name","custom-class"])):y("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):k(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class"])])),_:3},8,["class","style"])):y("",!0)}}})),[["__scopeId","data-v-2904f6a5"]]),fe=W(c(i(s({},{name:"wui-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:pe,setup(e){const o=e,l=p(G,null),t=m(`dropMenuId${X()}`),a=m(0),u=m(0),n=f((()=>"down"===o.direction?`top: calc(var(--window-top) + ${a.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${a.value}px)`)),{proxy:s}=v(),{linkChildren:i,children:d}=ne(ce),r=f((()=>d.some((e=>e.$.exposed.getShowPop())))),c=m(!1);let _;function z(){}function B(e){const{title:o,modelValue:l,options:t,valueKey:a,labelKey:u}=e;if(o)return o;for(let n=0,s=t.length;n<s;n++)if(l===t[n][a])return t[n][u];console.error("[elegant-wui-uni] warning(wui-drop-menu-item): no value is matched in the options option.")}function D(e){Y(`#${t.value}`,!1,s).then((l=>{if(!l)return;const{top:t,bottom:n}=l;"down"===o.direction?a.value=Number(n):a.value=u.value-Number(t),e.$.exposed.toggle()}))}function F(){o.closeOnClickModal&&d.forEach((e=>{e.$.exposed.close()}))}return w(r,(e=>{_&&clearTimeout(_),e?c.value=!0:_=setTimeout((()=>{c.value=!1,_=null}),16)})),i({props:o,fold:D,offset:a}),w((()=>o.direction),(e=>{["up","down"].includes(e)||console.error("[elegant-wui-uni] warning(wui-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),b((()=>{u.value=P().windowHeight})),(e,o)=>{const a=C,u=U(N("wui-icon"),q);return h(),g(a,{style:I(e.customStyle),class:S(`wui-drop-menu ${e.customClass}`),onClick:A(z,["stop","prevent"]),id:t.value},{default:V((()=>[e.modal?(h(),g(ee,{key:0,show:c.value,duration:e.duration,"z-index":12,"custom-style":n.value,onClick:F,onTouchmove:z},null,8,["show","duration","custom-style"])):y("",!0),x(a,{class:"wui-drop-menu__list"},{default:V((()=>[(h(!0),$(j,null,K(E(d),((e,o)=>(h(),g(a,{key:o,onClick:o=>function(e){e&&!e.disabled&&(l&&l.closeOther?l.closeOther(e):ue(e),D(e))}(e),class:S(`wui-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:V((()=>[x(a,{class:"wui-drop-menu__item-title"},{default:V((()=>[x(a,{class:"wui-drop-menu__item-title-text"},{default:V((()=>[O(T(B(e)),1)])),_:2},1024),x(u,{name:e.icon,size:e.iconSize,"custom-class":"wui-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),k(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}})),[["__scopeId","data-v-46a05ef0"]]),we=W(c({__name:"Index",setup(e){const o=d(),l=m(),t=m(),a=m(30);m(!1);const u=m(1),n=m(0),s=m(0),i=m(0),c=m(0),p=m(0),v=m(0),f=m(0),w=m(0),b=m(0),_=m([{label:"全部商品",value:0},{label:"新款商品",value:1,tip:"这是补充信息"},{label:"这是比较长的筛选条件这是比较长的筛选条件",value:2}]),y=m([{label:"综合",value:0},{label:"销量",value:1},{label:"上架时间",value:2}]);function k(){var e;null==(e=t.value)||e.initSlider()}function $({value:e}){console.log(e)}function j({value:e}){console.log(e)}function K({value:e}){console.log(e)}function S({value:e}){console.log(e)}function z({value:e}){console.log(e)}function T({value:e}){console.log(e)}function I({value:e}){console.log(e)}function P({value:e}){console.log(e)}function E({value:e}){console.log(e)}function B(){l.value.close()}const D=({status:e,resolve:l})=>{o.confirm({title:"异步"+(e?"打开":"关闭"),msg:`确定要${e?"打开":"关闭"}下拉菜单吗？`}).then((()=>{l(!0)})).catch((()=>{l(!1)}))};return(e,o)=>{const d=U(N("wui-message-box"),r),m=C,F=U(N("wui-drop-menu-item"),ve),H=U(N("wui-drop-menu"),fe),M=U(N("demo-block"),se),Q=U(N("wui-slider"),ie),G=U(N("wui-cell"),le),L=U(N("wui-button"),de),J=U(N("wui-sort-button"),re),q=U(N("page-wraper"),oe);return h(),g(q,null,{default:V((()=>[x(m,{onClick:o[0]||(o[0]=A((()=>{}),["stop"]))},{default:V((()=>[x(d)])),_:1}),x(m,{class:"demo-body"},{default:V((()=>[x(M,{title:"基本用法",transparent:""},{default:V((()=>[x(H,null,{default:V((()=>[x(F,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=e=>u.value=e),options:_.value,onChange:$},null,8,["modelValue","options"]),x(F,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=e=>n.value=e),options:y.value,onChange:j},null,8,["modelValue","options"])])),_:1})])),_:1}),x(M,{title:"自定义菜单内容",transparent:""},{default:V((()=>[x(H,null,{default:V((()=>[x(F,{modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=e=>s.value=e),options:_.value,onChange:K},null,8,["modelValue","options"]),x(F,{ref_key:"dropMenu",ref:l,title:"筛选",onOpened:k},{default:V((()=>[x(m,null,{default:V((()=>[x(Q,{modelValue:a.value,"onUpdate:modelValue":o[4]||(o[4]=e=>a.value=e),ref_key:"slider",ref:t},null,8,["modelValue"]),x(G,{title:"标题文字",value:"内容"}),x(G,{title:"标题文字",label:"描述信息",value:"内容"}),x(m,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:V((()=>[x(L,{block:"",size:"large",onClick:B},{default:V((()=>[O("主要按钮")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1}),x(M,{title:"自定义菜单选项",transparent:""},{default:V((()=>[x(m,{class:"custom-menu"},{default:V((()=>[x(H,{"custom-style":"flex: 1; min-width: 0"},{default:V((()=>[x(F,{modelValue:i.value,"onUpdate:modelValue":o[5]||(o[5]=e=>i.value=e),options:_.value,onChange:S},null,8,["modelValue","options"])])),_:1}),x(m,{style:{flex:"1"}},{default:V((()=>[x(J,{modelValue:c.value,"onUpdate:modelValue":o[6]||(o[6]=e=>c.value=e),title:"上架时间",onChange:z},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),x(M,{title:"自定义菜单图标",transparent:""},{default:V((()=>[x(H,null,{default:V((()=>[x(F,{title:"地图",icon:"location","icon-size":"24px"})])),_:1})])),_:1}),x(M,{title:"异步打开/关闭",transparent:""},{default:V((()=>[x(H,null,{default:V((()=>[x(F,{modelValue:b.value,"onUpdate:modelValue":o[7]||(o[7]=e=>b.value=e),options:_.value,onChange:$,"before-toggle":D},null,8,["modelValue","options"])])),_:1})])),_:1}),x(M,{title:"向上弹出",transparent:""},{default:V((()=>[x(H,{direction:"up"},{default:V((()=>[x(F,{modelValue:p.value,"onUpdate:modelValue":o[8]||(o[8]=e=>p.value=e),options:_.value,onChange:T,"custom-title":"custom-title","custom-icon":"custom-icon"},null,8,["modelValue","options"]),x(F,{modelValue:v.value,"onUpdate:modelValue":o[9]||(o[9]=e=>v.value=e),options:y.value,onChange:I},null,8,["modelValue","options"])])),_:1})])),_:1}),x(M,{title:"禁用",transparent:""},{default:V((()=>[x(H,{direction:"up"},{default:V((()=>[x(F,{modelValue:f.value,"onUpdate:modelValue":o[10]||(o[10]=e=>f.value=e),disabled:"",options:_.value,onChange:P},null,8,["modelValue","options"]),x(F,{modelValue:w.value,"onUpdate:modelValue":o[11]||(o[11]=e=>w.value=e),options:y.value,onChange:E},null,8,["modelValue","options"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-5f29070a"]]);export{we as default};
