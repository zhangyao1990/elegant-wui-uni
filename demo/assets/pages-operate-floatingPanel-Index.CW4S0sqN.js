var a=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,r=(a,e)=>{for(var t in e||(e={}))l.call(e,t)&&n(a,t,e[t]);if(s)for(var t of s(e))o.call(e,t)&&n(a,t,e[t]);return a},u=(a,s)=>e(a,t(s));import{d as i,r as c,c as h,z as d,Z as p,L as g,a as v,g as f,w as m,h as w,i as _,s as b,S as j,K as y,A as I,B as O,ar as x,n as T,F as P,e as $,f as A,p as S,k as B,t as D,u as M}from"./index-7V_Oz7o2.js";import{c as C,a9 as H,t as k,k as V,J as Y,m as z,e as F,o as G,aa as U,a as Z,f as E,g as J,h as K,_ as L}from"./page-wraper.XTDu10FG.js";import{_ as R}from"./wui-cell-group.SQjrhoFo.js";import{u as N}from"./useTouch.BLhMhb8z.js";import{_ as Q,a as W}from"./wui-tabs.Cb2FYLS_.js";import"./useChildren.CE-WdV6D.js";import"./wui-badge.Bbz0hbKN.js";import"./wui-sticky-box.CSGOAJXH.js";import"./wui-resize.CqAgl2MN.js";import"./useTranslate.NU6YixkU.js";const X=u(r({},C),{height:z(0),anchors:Y(),safeAreaInsetBottom:V(!1),showScrollbar:H,duration:k(300),contentDraggable:H}),q=Z(i(u(r({},{name:"wui-floating-panel",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:X,emits:["update:height","height-change"],setup(a,{emit:e}){const t=N(),s=a,l=e,o=c(s.height);let n;const r=c(0),u=c(!1),i=h((()=>({min:s.anchors[0]?s.anchors[0]:100,max:s.anchors[s.anchors.length-1]?s.anchors[s.anchors.length-1]:Math.round(.6*r.value)}))),x=h((()=>s.anchors.length>=2?s.anchors:[i.value.min,i.value.max])),T=h((()=>{const a={height:F(i.value.max),transform:`translateY(calc(100% + ${F(-o.value)}))`,transition:u.value?"none":`transform ${s.duration}ms cubic-bezier(0.18, 0.89, 0.32, 1.28)`};return`${G(a)};${s.customStyle}`})),P=a=>{o.value=a,l("update:height",a)},$=a=>{t.touchStart(a),u.value=!0,n=-o.value},A=a=>{if("content"==a.currentTarget.dataset.id&&!s.contentDraggable)return;t.touchMove(a);const e=t.deltaY.value+n;P(-B(e))},S=()=>{u.value=!1,P(U(x.value,o.value)),o.value!==-n&&l("height-change",{height:o.value})},B=a=>{const e=Math.abs(a),{min:t,max:s}=i.value;return e>s?-(s+.2*(e-s)):e<t?-(t-.2*(t-e)):a};return d((()=>s.height),(a=>{o.value=a})),d(i,(()=>{P(U(x.value,o.value))}),{immediate:!0}),p((()=>{const{windowHeight:a}=g();r.value=a})),(a,e)=>{const t=_,s=j;return f(),v(t,{class:b(`wui-floating-panel ${a.customClass} ${a.safeAreaInsetBottom?"is-safe":""}`),style:O(T.value),onTouchstartPassive:$,onTouchmovePassive:A,onTouchend:S,onTouchcancel:S},{default:m((()=>[w(t,{class:b("wui-floating-panel__header")},{default:m((()=>[w(t,{class:b("wui-floating-panel__header-bar")})])),_:1}),w(s,{class:b("wui-floating-panel__content"),"data-id":"content","show-scrollbar":a.showScrollbar,"scroll-y":"",onTouchmove:y(A,["stop","prevent"])},{default:m((()=>[I(a.$slots,"default",{},void 0,!0)])),_:3},8,["show-scrollbar"])])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-57e5e93f"]]),aa=Z(i({__name:"Index",setup(a){const{show:e}=E(),t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s=c(0),l=c(0),o=c(0),n=c([]),r=({height:a})=>{e(F(a))};return x((()=>{o.value=g().windowHeight,n.value=[100,Math.round(.4*o.value),Math.round(.7*o.value)],l.value=n.value[1]})),(a,e)=>{const o=$(A("wui-toast"),J),u=$(A("wui-cell"),K),i=$(A("wui-cell-group"),R),c=$(A("wui-floating-panel"),q),h=$(A("wui-tab"),Q),d=_,p=$(A("wui-tabs"),W),g=$(A("page-wraper"),L);return f(),T(P,null,[w(o),w(d,{class:"floating-panel"},{default:m((()=>[w(g,null,{default:m((()=>[w(p,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a)},{default:m((()=>[w(h,{title:"基础用法"},{default:m((()=>[w(c,{safeAreaInsetBottom:"",contentDraggable:!1},{default:m((()=>[w(i,{border:""},{default:m((()=>[(f(),T(P,null,S(t,(a=>w(u,{key:a,title:a},null,8,["title"]))),64))])),_:1})])),_:1})])),_:1}),w(h,{title:"自定义锚点"},{default:m((()=>[w(c,{height:l.value,"onUpdate:height":e[0]||(e[0]=a=>l.value=a),anchors:n.value,safeAreaInsetBottom:"",onHeightChange:r},{default:m((()=>[w(d,{class:"inner-content"},{default:m((()=>[B("自定义锚点 "+D(n.value.map(M(F)))+" - "+D(M(F)(l.value.toFixed(0))),1)])),_:1})])),_:1},8,["height","anchors"])])),_:1}),w(h,{title:"仅头部拖拽"},{default:m((()=>[w(c,{contentDraggable:!1},{default:m((()=>[w(d,{class:"inner-content"},{default:m((()=>[B("内容区不可以拖拽")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-9d1378cc"]]);export{aa as default};
