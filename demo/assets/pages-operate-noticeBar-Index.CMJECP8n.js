var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,r=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&o(e,a,t[a]);if(l)for(var a of l(t))i.call(t,a)&&o(e,a,t[a]);return e},s=(e,l)=>t(e,a(l)),u=(e,t,a)=>new Promise(((l,n)=>{var i=e=>{try{r(a.next(e))}catch(t){n(t)}},o=e=>{try{r(a.throw(e))}catch(t){n(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,o);r((a=a.apply(e,t)).next())}));import{d as c,r as d,c as p,I as f,H as v,z as y,v as x,as as b,a0 as w,O as h,a as m,x as _,g,w as k,A as $,h as j,i as C,B as P,n as O,F as D,p as I,k as S,t as T,s as z,e as A,f as F,M as E}from"./index-7V_Oz7o2.js";import{c as H,l as M,k as B,m as G,o as N,n as U,b as V,p as W,M as X,a as Y,_ as q}from"./page-wraper.XTDu10FG.js";import{_ as J}from"./demo-block.Dak0lv3M.js";import{_ as K}from"./wui-button.CpEmAov2.js";const L=s(r({},H),{text:{type:[String,Array],default:""},type:M("warning"),scrollable:B(!0),delay:G(1),speed:G(50),closable:B(!1),wrapable:B(!1),prefix:String,color:String,backgroundColor:String,direction:M("horizontal")}),Q=Y(c(s(r({},{name:"wui-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:L,emits:["close","next","click"],setup(e,{expose:t,emit:a}){const l=e,n=a,i=d(0),o=d(!0),r=d(0),s=p((()=>Array.isArray(l.text)?l.text:[l.text])),c=p((()=>s.value[r.value])),A=d(0),F=d(null),E=d(null),H=p((()=>"horizontal"===l.direction)),M=p((()=>"vertical"===l.direction)),B=f({transitionProperty:"unset",transitionDelay:"unset",transitionDuration:"unset",transform:"none",transitionTimingFunction:"linear"}),G=p((()=>N(B))),Y=p((()=>{const e={};return U(l.color)&&(e.color=l.color),U(l.backgroundColor)&&(e.background=l.backgroundColor),`${N(e)};${l.customStyle}`})),q=p((()=>{const{type:e,wrapable:t,scrollable:a}=l;let n=[];return e&&n.push(`is-${e}`),H.value?!t&&!a&&n.push("wui-notice-bar--ellipse"):n.push("wui-notice-bar--ellipse"),t&&!a&&n.push("wui-notice-bar--wrap"),n.join(" ")})),{proxy:J}=v();function K(){Q(),L()}function L(){h((()=>function(){return u(this,null,(function*(){const[e,t]=yield ee();e.width&&t.width&&t.height&&(F.value=e,E.value=t,i.value=e.width,H.value?l.scrollable&&Z({duration:t.width/l.speed,delay:l.delay,translate:-t.width}):s.value.length>1&&te(t.height))}))}()))}function Q(){B.transitionProperty="unset",B.transitionDelay="unset",B.transitionDuration="unset",B.transform="none",B.transitionTimingFunction="linear",r.value=0,A.value=0}function R(){o.value=!1,n("close")}function Z({duration:e,delay:t,translate:a}){B.transitionProperty="all",B.transitionDelay=`${t}s`,B.transitionDuration=`${e}s`,B.transform=`${"vertical"===l.direction?"translateY":"translateX"}(${a}px)`,B.transitionTimingFunction="linear"}function ee(){return Promise.all([W(".wui-notice-bar__wrap",!1,J),W(".wui-notice-bar__content",!1,J)])}function te(e){return u(this,null,(function*(){const t=-e/(s.value.length+1)*(r.value+1);Z({duration:e/(s.value.length+1)/l.speed,delay:l.delay,translate:t})}))}function ae(){H.value?Z({duration:0,delay:0,translate:i.value+1}):++A.value>=s.value.length&&(A.value=0,Z({duration:0,delay:0,translate:0}));const e=setTimeout((()=>{r.value>=s.value.length-1?r.value=0:r.value++,n("next",r.value),h((()=>u(this,null,(function*(){try{const[e,t]=yield ee();F.value=e,E.value=t,i.value=e.width||0}catch(e){}E.value&&E.value.width&&E.value.height&&(H.value?Z({duration:(i.value+E.value.width)/l.speed,delay:l.delay,translate:-E.value.width}):te(E.value.height))})))),clearTimeout(e)}),20)}function le(){const e=X(l.text)?{index:r.value,text:l.text[r.value]}:{index:0,text:l.text};n("click",e)}return y((()=>l.text),(()=>{K()}),{deep:!0}),x((()=>{L()})),b((()=>{L()})),w((()=>{Q()})),t({reset:K}),(e,t)=>{const a=C;return o.value?(g(),m(a,{key:0,class:z(`wui-notice-bar ${e.customClass} ${q.value}`),style:P(Y.value)},{default:k((()=>[e.prefix?(g(),m(V,{key:0,"custom-class":"wui-notice-bar__prefix",name:e.prefix},null,8,["name"])):$(e.$slots,"prefix",{key:1},void 0,!0),j(a,{class:"wui-notice-bar__wrap"},{default:k((()=>[j(a,{class:"wui-notice-bar__content",style:P(G.value),onTransitionend:ae,onClick:le},{default:k((()=>[M.value?(g(),O(D,{key:0},[(g(!0),O(D,null,I(s.value,(e=>(g(),m(a,{key:e},{default:k((()=>[S(T(e),1)])),_:2},1024)))),128)),s.value.length>1?(g(),m(a,{key:0},{default:k((()=>[S(T(s.value[0]),1)])),_:1})):_("",!0)],64)):$(e.$slots,"default",{key:1},(()=>[S(T(c.value),1)]),!0)])),_:3},8,["style"])])),_:3}),e.closable?(g(),m(V,{key:2,"custom-class":"wui-notice-bar__suffix",name:"close-bold",onClick:R})):$(e.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):_("",!0)}}})),[["__scopeId","data-v-48e8d66e"]]),R=Y(c({__name:"Index",setup(e){const t=d();function a(){var e;null==(e=t.value)||e.reset()}const l=d(["欢迎使用Eleagnt Wui Uni","该组件库基于uniapp ->Vue3, ts构建","项目地址：https://github.com/zhangyao1990/elegant-wui-uni","我们的目标是打造最强uniapp组件库","诚挚邀请大家共同建设","这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息"]),n=e=>{console.log("展示下一条，index: ",e),console.log("文本是："+l.value[e])};function i(e){console.log(e)}return(e,o)=>{const r=A(F("wui-notice-bar"),Q),s=A(F("demo-block"),J),u=A(F("wui-icon"),V),c=A(F("wui-button"),K),d=C,p=A(F("page-wraper"),q);return g(),m(p,null,{default:k((()=>[j(d,null,{default:k((()=>[j(s,{title:"基本用法"},{default:k((()=>[j(r,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),j(s,{title:"类型修改"},{default:k((()=>[j(r,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),j(r,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),j(s,{title:"禁止滚动"},{default:k((()=>[j(r,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),j(s,{title:"插槽"},{default:k((()=>[j(r,{scrollable:!1},{prefix:k((()=>[j(u,{"custom-class":"prefix",name:"warn-bold"},{default:k((()=>[S("占位符")])),_:1})])),suffix:k((()=>[E("div",{style:{color:"#4d80f0"}},"查看")])),default:k((()=>[S(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),j(s,{title:"可关闭的"},{default:k((()=>[j(r,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),j(s,{title:"多行展示"},{default:k((()=>[j(r,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),j(s,{title:"自定义颜色"},{default:k((()=>[j(r,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1}),j(s,{title:"多文本轮播"},{default:k((()=>[j(r,{onClick:i,text:l.value,prefix:"check-outline",onNext:n},null,8,["text"])])),_:1}),j(s,{title:"垂直滚动"},{default:k((()=>[j(r,{onClick:i,prefix:"warn-bold",direction:"vertical",text:l.value,delay:3,"custom-class":"space"},null,8,["text"]),j(r,{onClick:i,prefix:"warn-bold",direction:"vertical",text:"只有一条消息不会滚动",delay:3,"custom-class":"space"})])),_:1}),j(s,{title:"重置播放动画"},{default:k((()=>[j(r,{ref_key:"notice",ref:t,prefix:"warn-bold",direction:"vertical",text:l.value,delay:3,"custom-class":"space"},null,8,["text"]),j(c,{onClick:a},{default:k((()=>[S("重置播放动画")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-f13a9a5e"]]);export{R as default};
