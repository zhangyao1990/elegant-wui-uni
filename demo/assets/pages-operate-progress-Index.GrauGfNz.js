var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,n=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))o.call(t,r)&&l(e,r,t[r]);return e},c=(e,a)=>t(e,r(a));import{d as u,r as i,c as p,z as g,a as d,g as f,w as m,h as v,x as b,i as y,B as h,s as w,k as _,t as x,e as O,f as j}from"./index-7V_Oz7o2.js";import{c as k,m as P,k as N,o as T,b as C,n as M,M as S,y as $,x as I,a as z,_ as E}from"./page-wraper.XTDu10FG.js";import{_ as A}from"./demo-block.Dak0lv3M.js";import{_ as B}from"./wui-button.CpEmAov2.js";const D=c(n({},k),{percentage:P(0),hideText:N(!1),color:{type:[String,Array]},duration:P(30),status:String}),G=z(u(c(n({},{name:"wui-progress",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:D,setup(e){const t=e,r=i(""),a=i(0),s=i(0);let o=null;const l=p((()=>T({background:r.value,width:`${a.value}%`,"transition-duration":s.value*t.duration*.001+"s"}))),n=p((()=>t.status?`is-${t.status}`:"")),c=p((()=>{let e="";switch(t.status){case"danger":e="close-outline";break;case"success":e="check-outline";break;case"warning":e="warn-bold"}return e}));function u(){return e=this,r=null,o=function*(){const{percentage:e,color:r}=t;if(!M(r)||S(r)&&0===r.length)return s.value=Math.abs(e-a.value),yield $(),void(a.value=e);if(a.value===e)return;const o=S(r)?r:[r];!function(e){const t=e.every((e=>"string"==typeof e)),r=O(e);if(!t&&!r)throw Error("Color must be String or Object with color and percentage");if(r&&e.some((({percentage:e})=>Number.isNaN(e))))throw Error("All the percentage must can be formatted to Number")}(o);const l=function(e){const t=100/e.length;return O(e)?e.sort(((e,t)=>e.percentage-t.percentage)):e.map(((e,r)=>({color:e,percentage:(r+1)*t})))}(o);a.value>e?function(e,t){e.some((e=>{if(t<=e.percentage)return j(t,e.color),!0}))}(l,e):function(e,t){e.some(((r,s)=>{if(a.value<r.percentage&&r.percentage<=t)return j(r.percentage,r.color),!0;s===e.length-1&&j(t,r.color)}))}(l,e)},new Promise(((t,a)=>{var s=e=>{try{n(o.next(e))}catch(t){a(t)}},l=e=>{try{n(o.throw(e))}catch(t){a(t)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,l);n((o=o.apply(e,r)).next())}));var e,r,o}function O(e){return e.every((e=>I(e)&&Object.prototype.hasOwnProperty.call(e,"color")&&Object.prototype.hasOwnProperty.call(e,"percentage")))}function j(e,l){if(o)return;const{duration:n}=t;s.value=Math.abs(e-a.value),setTimeout((()=>{a.value=e,r.value=l,o=setTimeout((()=>{o&&clearTimeout(o),o=null,u()}),s.value*n)}),50)}return g((()=>[t.percentage,t.color,t.duration]),(()=>{var e;e=t.percentage,(Number.isNaN(e)||e<0||e>100)&&console.error("The value of percentage must be between 0 and 100"),u()}),{immediate:!0}),(e,t)=>{const r=y;return f(),d(r,{class:w(`wui-progress ${e.customClass}`),style:h(e.customStyle)},{default:m((()=>[v(r,{class:"wui-progress__outer"},{default:m((()=>[v(r,{class:w(`wui-progress__inner ${n.value}`),style:h(l.value)},null,8,["class","style"])])),_:1}),e.hideText?e.status?(f(),d(C,{key:1,"custom-class":`wui-progress__label wui-progress__icon ${n.value}`,name:c.value,color:"string"==typeof e.color?e.color:""},null,8,["custom-class","name","color"])):b("",!0):(f(),d(r,{key:0,class:"wui-progress__label"},{default:m((()=>[_(x(e.percentage)+"%",1)])),_:1}))])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-56fd1b15"]]),H=u({__name:"Index",setup(e){const t=i(30),r=i(100),a=i(50),s=()=>{a.value=Math.min(a.value+10,100)},o=()=>{a.value=Math.max(a.value-10,0)},l=i([{color:"yellow",percentage:30},{color:"red",percentage:60},{color:"blue",percentage:80},{color:"black",percentage:90}]);return(e,n)=>{const c=O(j("wui-progress"),G),u=O(j("demo-block"),A),i=O(j("wui-button"),B),p=O(j("page-wraper"),E);return f(),d(p,null,{default:m((()=>[v(u,{title:"基本用法"},{default:m((()=>[v(c,{percentage:t.value},null,8,["percentage"])])),_:1}),v(u,{title:"不显示进度文字"},{default:m((()=>[v(c,{percentage:60,"hide-text":""})])),_:1}),v(u,{title:"进度条状态"},{default:m((()=>[v(c,{percentage:100,"hide-text":"",status:"success"}),v(c,{percentage:80,"hide-text":"",status:"danger"}),v(c,{percentage:90,"hide-text":"",status:"warning"})])),_:1}),v(u,{title:"修改颜色"},{default:m((()=>[v(c,{percentage:80,color:"#00c740"})])),_:1}),v(u,{title:"颜色数组"},{default:m((()=>[v(c,{percentage:100,color:["#00c740","#ffb300","#e2231a","#0083ff"]}),v(c,{percentage:r.value,color:l.value},null,8,["percentage","color"])])),_:1}),v(u,{title:"动态设置"},{default:m((()=>[v(c,{percentage:a.value},null,8,["percentage"]),v(i,{"custom-style":"margin-right: 10px;",onClick:s,type:"success",size:"small"},{default:m((()=>[_("+10")])),_:1}),v(i,{onClick:o,type:"error",size:"small"},{default:m((()=>[_("-10")])),_:1})])),_:1})])),_:1})}}});export{H as default};
