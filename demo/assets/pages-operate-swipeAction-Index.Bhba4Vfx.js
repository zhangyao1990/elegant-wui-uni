var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,o=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,n=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&o(e,a,t[a]);if(l)for(var a of l(t))u.call(t,a)&&o(e,a,t[a]);return e},c=(e,l)=>t(e,a(l));import{c as i,k as d,l as r,q as f,p as b,a as p,s as _,f as v,_ as k,g as m,h}from"./page-wraper.XTDu10FG.js";import{d as g,G as w,r as y,H as C,z as $,Z as V,v as j,J as O,a as P,g as T,w as x,h as z,i as I,B as Q,A as S,K as F,s as M,e as D,f as G,u as H,k as q}from"./index-7V_Oz7o2.js";import{p as A,r as B,c as E}from"./clickoutside.CJmLG0WC.js";import{u as J}from"./useTouch.BLhMhb8z.js";import{_ as K}from"./demo-block.Dak0lv3M.js";import{_ as U}from"./wui-button.CpEmAov2.js";const X=c(n({},i),{modelValue:r("close"),disabled:d(!1),beforeClose:Function}),Z=p(g(c(n({},{name:"wui-swipe-action",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:X,emits:["click","update:modelValue"],setup(e,{expose:t,emit:a}){const l=e,s=a,u=w(f,null),o=y(""),n=y(0),c=y(0),i=y(!1),d=J(),{proxy:r}=C();function p(e,t){l.disabled||_().then((([a,l])=>{switch(e){case"close":if(0===c.value)return;D("value",t);break;case"left":v(a);break;case"right":v(-l)}}))}function _(){return Promise.all([b(".wui-swipe-action__left",!1,r).then((e=>e.width?e.width:0)),b(".wui-swipe-action__right",!1,r).then((e=>e.width?e.width:0))])}function v(e=0){const t=`translate3d(${e}px, 0, 0)`,a=i.value?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)";o.value=`\n        -webkit-transform: ${t};\n        -webkit-transition: ${a};\n        transform: ${t};\n        transition: ${a};\n      `,c.value=e}function k(e){l.disabled||0===c.value||(D("click",e=e||"inside"),s("click",{value:e}))}function m(e){l.disabled||(n.value=c.value,d.touchStart(e),u&&u.closeOther?u.closeOther(r):E(r))}function h(e){if(l.disabled)return;if(d.touchMove(e),"vertical"===d.direction.value)return;e.preventDefault(),e.stopPropagation(),i.value=!0;const t=n.value+d.deltaX.value;_().then((([a,l])=>0===a&&t>0||0===l&&t<0?(v(0),m(e)):0!==a&&t>=a?(v(a),m(e)):0!==l&&-t>=l?(v(-l),m(e)):void v(t)))}function g(){if(l.disabled)return;const e=.3;i.value=!1,_().then((([t,a])=>{n.value<0&&c.value<0&&c.value-n.value<a*e?(v(-a),s("update:modelValue","right")):n.value>0&&c.value>0&&n.value-c.value<t*e?(v(t),s("update:modelValue","left")):a>0&&n.value>=0&&c.value<0&&Math.abs(c.value)>a*e?(v(-a),s("update:modelValue","right")):t>0&&n.value<=0&&c.value>0&&Math.abs(c.value)>t*e?(v(t),s("update:modelValue","left")):D("swipe")}))}function D(e,t){if("swipe"===e&&0===n.value)return v(0);"swipe"===e&&n.value>0?t="left":"swipe"===e&&n.value<0&&(t="right"),e&&t&&l.beforeClose&&l.beforeClose(e,t),v(0),"close"!==l.modelValue&&s("update:modelValue","close")}return $((()=>l.modelValue),((e,t)=>{p(e,t)}),{deep:!0}),V((()=>{u&&u.pushToQueue?u.pushToQueue(r):A(r),n.value=0,c.value=0,i.value=!1})),j((()=>{i.value=!0,p(l.modelValue),i.value=!1})),O((()=>{u&&u.removeFromQueue?u.removeFromQueue(r):B(r)})),t({close:D}),(e,t)=>{const a=I;return T(),P(a,{class:M(`wui-swipe-action ${e.customClass}`),style:Q(e.customStyle),onClick:t[2]||(t[2]=F((e=>k()),["stop"])),onTouchstart:m,onTouchmove:h,onTouchend:g,onTouchcancel:g},{default:x((()=>[z(a,{class:"wui-swipe-action__wrapper",style:Q(o.value)},{default:x((()=>[z(a,{class:"wui-swipe-action__left",onClick:t[0]||(t[0]=e=>k("left"))},{default:x((()=>[S(e.$slots,"left",{},void 0,!0)])),_:3}),S(e.$slots,"default",{},void 0,!0),z(a,{class:"wui-swipe-action__right",onClick:t[1]||(t[1]=e=>k("right"))},{default:x((()=>[S(e.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["style"])])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-29ada837"]]),L=p(g({__name:"Index",setup(e){const{closeOutside:t}=_(),a=v(),l=y("close"),s=(e,t)=>{"click"===e?a.show(`${e} ${t}导致滑动按钮关闭`):a.show(`${e}导致${t}滑动按钮关闭`)};function u(e){l.value=e}function o({value:e}){a.show(`点击${e}关闭操作按钮`)}function n(e){a.show(`点击了${e}`)}function c(){}return(e,a)=>{const i=D(G("wui-toast"),m),d=D(G("wui-cell"),h),r=I,f=D(G("wui-swipe-action"),Z),b=D(G("demo-block"),K),p=D(G("wui-button"),U),_=D(G("page-wraper"),k);return T(),P(_,null,{default:x((()=>[z(i),z(r,{onClick:F(H(t),["stop"])},{default:x((()=>[z(b,{transparent:"",title:"基本用法"},{default:x((()=>[z(f,null,{right:x((()=>[z(r,{class:"action"},{default:x((()=>[z(r,{class:"button",style:{background:"#fa4350"},onClick:a[0]||(a[0]=e=>n("操作1"))},{default:x((()=>[q("操作1")])),_:1}),z(r,{class:"button",style:{background:"#f0883a"},onClick:a[1]||(a[1]=e=>n("操作2"))},{default:x((()=>[q("操作2")])),_:1}),z(r,{class:"button",style:{background:"#4d80f0"},onClick:a[2]||(a[2]=e=>n("操作3"))},{default:x((()=>[q("操作3")])),_:1})])),_:1})])),default:x((()=>[z(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),z(b,{transparent:"",title:"左右滑动"},{default:x((()=>[z(f,null,{left:x((()=>[z(r,{class:"action"},{default:x((()=>[z(r,{class:"button",style:{background:"#fa4350"}},{default:x((()=>[q("操作1")])),_:1}),z(r,{class:"button",style:{background:"#f0883a"}},{default:x((()=>[q("操作2")])),_:1}),z(r,{class:"button",style:{background:"#4d80f0"}},{default:x((()=>[q("操作3")])),_:1})])),_:1})])),right:x((()=>[z(r,{class:"action"},{default:x((()=>[z(r,{class:"button",style:{background:"#fa4350"}},{default:x((()=>[q("操作4")])),_:1}),z(r,{class:"button",style:{background:"#f0883a"}},{default:x((()=>[q("操作5")])),_:1}),z(r,{class:"button",style:{background:"#4d80f0"}},{default:x((()=>[q("操作6")])),_:1})])),_:1})])),default:x((()=>[z(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),z(b,{transparent:"",title:"切换按钮"},{default:x((()=>[z(f,{modelValue:l.value,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value=e),"before-close":s},{left:x((()=>[z(r,{class:"action"},{default:x((()=>[z(r,{class:"button",style:{background:"#fa4350"}},{default:x((()=>[q("操作1")])),_:1}),z(r,{class:"button",style:{background:"#f0883a"}},{default:x((()=>[q("操作2")])),_:1}),z(r,{class:"button",style:{background:"#4d80f0"}},{default:x((()=>[q("操作3")])),_:1})])),_:1})])),right:x((()=>[z(r,{class:"action"},{default:x((()=>[z(r,{class:"button",style:{background:"#fa4350"}},{default:x((()=>[q("操作4")])),_:1}),z(r,{class:"button",style:{background:"#f0883a"}},{default:x((()=>[q("操作5")])),_:1}),z(r,{class:"button",style:{background:"#4d80f0"}},{default:x((()=>[q("操作6")])),_:1})])),_:1})])),default:x((()=>[z(d,{title:"标题文字",value:"内容"})])),_:1},8,["modelValue"])])),_:1}),z(r,{class:"button-group"},{default:x((()=>[z(r,{onClick:F(c,["stop"])},{default:x((()=>[z(p,{size:"small",onClick:a[4]||(a[4]=e=>u("left"))},{default:x((()=>[q("打开左边")])),_:1})])),_:1}),z(r,{onClick:F(c,["stop"])},{default:x((()=>[z(p,{size:"small",onClick:a[5]||(a[5]=e=>u("close"))},{default:x((()=>[q("关闭所有")])),_:1})])),_:1}),z(r,{onClick:F(c,["stop"])},{default:x((()=>[z(p,{size:"small",onClick:a[6]||(a[6]=e=>u("right"))},{default:x((()=>[q("打开右边")])),_:1})])),_:1})])),_:1}),z(b,{transparent:"",title:"点击事件"},{default:x((()=>[z(f,{onClick:o},{right:x((()=>[z(r,{class:"action"},{default:x((()=>[z(r,{class:"button",style:{background:"#fa4350"}},{default:x((()=>[q("操作1")])),_:1}),z(r,{class:"button",style:{background:"#f0883a"}},{default:x((()=>[q("操作2")])),_:1}),z(r,{class:"button",style:{background:"#4d80f0"}},{default:x((()=>[q("操作3")])),_:1})])),_:1})])),default:x((()=>[z(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),z(b,{transparent:"",title:"禁用滑动按钮"},{default:x((()=>[z(f,{disabled:""},{right:x((()=>[z(r,{class:"action"},{default:x((()=>[z(r,{class:"button",style:{background:"#fa4350"}},{default:x((()=>[q("操作1")])),_:1}),z(r,{class:"button",style:{background:"#f0883a"}},{default:x((()=>[q("操作2")])),_:1}),z(r,{class:"button",style:{background:"#4d80f0"}},{default:x((()=>[q("操作3")])),_:1})])),_:1})])),default:x((()=>[z(d,{title:"标题文字",value:"内容"})])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-b15ba0a0"]]);export{L as default};
