import{r as a,c as o,J as e}from"./index-CnRAlpd-.js";import{n as t}from"./page-wraper.DMME2CXH.js";import{u as r}from"./useRaf.BH9qbs8q.js";const n=1e3,s=6e4,l=36e5,u=24*l;function i(i){let f,h;const{start:c,cancel:m}=r((function(){i.millisecond?j():w()})),v=a(i.time),M=o((()=>{return{total:a=v.value,days:Math.floor(a/u),hours:Math.floor(a%u/l),minutes:Math.floor(a%l/s),seconds:Math.floor(a%s/n),milliseconds:Math.floor(a%n)};var a})),p=()=>{h=!1,m()},d=()=>Math.max(f-Date.now(),0),g=a=>{v.value=a,t(i.onChange)&&i.onChange(M.value),0===a&&(p(),t(i.onFinish)&&i.onFinish())},j=()=>{h&&(g(d()),v.value>0&&c())},w=()=>{if(h){const e=d();a=e,o=v.value,(Math.floor(a/1e3)!==Math.floor(o/1e3)||0===e)&&g(e),v.value>0&&c()}var a,o};return e(p),{start:()=>{h||(f=Date.now()+v.value,h=!0,c())},pause:p,reset:(a=i.time)=>{p(),v.value=a},current:M}}export{i as u};
