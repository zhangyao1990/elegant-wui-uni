var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,a=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,r=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&a(e,n,t[n]);if(i)for(var n of i(t))u.call(t,n)&&a(e,n,t[n]);return e},o=(e,i)=>t(e,n(i));import{d as l,r as c,c as d,z as p,a as m,g as f,w as b,h,x as v,i as g,K as w,s as N,a6 as y,B as _,O as M}from"./index-7V_Oz7o2.js";import{l as x,k as S,t as O,m as P,v as j,c as I,z as W,Y as C,P as V,n as T,b as F,a as k}from"./page-wraper.XTDu10FG.js";const E=o(r({},I),{modelValue:j(W),min:P(1),max:P(Number.MAX_SAFE_INTEGER),step:P(1),stepStrictly:S(!1),precision:O(0),disabled:S(!1),disableInput:S(!1),disableMinus:S(!1),disablePlus:S(!1),withoutInput:S(!1),inputWidth:O(36),allowNull:S(!1),placeholder:x(""),adjustPosition:S(!0),beforeChange:Function,longPress:S(!1),immediateChange:S(!0),updateOnInit:S(!0),inputType:x("digit")});function $(){}function z(e,{args:t=[],done:n,canceled:i,error:s}){if(e){const u=e.apply(null,t);C(u)?u.then((e=>{e?n():i&&i()})).catch(s||$):u?n():i&&i()}else n()}const A=k(l(o(r({},{name:"wui-input-number",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:E,emits:["change","focus","blur","update:modelValue"],setup(e,{emit:t}){const n=e,i=t,s=c(function(){if(!n.updateOnInit)return function(e){if(n.allowNull&&(!T(e)||""===e))return"";if(!T(e)||""===e)return n.min;let t=Number(e);if(isNaN(t))return n.min;const i=Number(n.precision);if(!T(n.precision))return t;return 0===i?Number(t.toFixed(0)):t.toFixed(i)}(n.modelValue);const e=O(n.modelValue);V(String(e),String(n.modelValue))||i("update:modelValue",e);return e}());let u=null;const a=d((()=>{const e=x(s.value);return n.disabled||e<=n.min||j(e,-n.step)<n.min})),r=d((()=>{const e=x(s.value);return n.disabled||e>=n.max||j(e,n.step)>n.max}));function o(e){if(!T(e))return 0;const t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1}function l(e){const t=Number(n.precision);return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function x(e){if(n.allowNull&&(!T(e)||""===e))return NaN;if(!T(e)||""===e)return n.min;let t=String(e);if(t.endsWith(".")&&(t=t.slice(0,-1)),t.startsWith(".")&&(t="0"+t),t.startsWith("-.")&&(t="-0"+t.substring(1)),"-"===t||""===t)return n.min;let i=Number(t);return isNaN(i)&&(i=n.min),S(i)}function S(e){let t=e;if(n.stepStrictly){const e=o(n.step),i=Math.pow(10,e);t=Math.round(t/n.step)*i*n.step/i}return t=n.stepStrictly?function(e,t,i){if(e>=t&&e<=i)return e;const s=o(n.step),u=Math.pow(10,s);if(e<t){const e=l(Math.ceil(t*u/(n.step*u))*n.step*u/u);if(e>i){return l(Math.floor(i*u/(n.step*u))*n.step*u/u)}return e}if(e>i){const e=l(Math.floor(i*u/(n.step*u))*n.step*u/u);if(e<t){return l(Math.ceil(t*u/(n.step*u))*n.step*u/u)}return e}return e}(t,n.min,n.max):Math.min(Math.max(t,n.min),n.max),T(n.precision)&&(t=l(t)),t}function O(e){if(n.allowNull&&(!T(e)||""===e))return"";const t=x(e),i=Number(n.precision);return T(n.precision)?0===i?Number(t.toFixed(0)):t.toFixed(i):t}function P(e){if(n.allowNull&&(!T(e)||""===e)){if(V("",String(n.modelValue)))return void(s.value="");const e=()=>{s.value="",i("update:modelValue",""),i("change",{value:""})};return void z(n.beforeChange,{args:[""],done:e})}const t=x(e),u=O(e);if(V(String(t),String(n.modelValue)))return void(s.value=u);z(n.beforeChange,{args:[t],done:()=>{s.value=u,i("update:modelValue",t),i("change",{value:t})}})}function j(e,t){const i=Number(e);if(isNaN(i))return S(n.min);const s=Math.max(o(i),o(t)),u=Math.pow(10,s);return S((i*u+t*u)/u)}function I(e){const t="add"===e?n.step:-n.step;if(t<0&&(a.value||n.disableMinus)||t>0&&(r.value||n.disablePlus))return;P(j(s.value,t))}function W(e){const t=e.detail.value||"";s.value=t,M((()=>{if(""===t)return s.value="",void(n.immediateChange&&n.allowNull&&P(""));const e=function(e){if(!e)return"";let t=e.replace(/[^\d.-]/g,"");const i=t.startsWith("-");if(t=t.replace(/-/g,""),i&&(t="-"+t),Number(n.precision)>0){const e=t.split(".");e.length>2&&(t=e[0]+"."+e.slice(1).join(""))}else t=t.split(".")[0];return t.startsWith(".")?"0"+t:t.startsWith("-.")?"-0"+t.substring(1):t}(t);Number(n.precision)>0&&function(e){if(!e)return!1;const t=String(e);return t.endsWith(".")||t.startsWith(".")||t.startsWith("-.")||"-"===t||Number(n.precision)>0&&-1===t.indexOf(".")}(e)?s.value=e:(s.value=e,n.immediateChange&&P(e))}))}function C(e){const t=e.detail.value||"";P(t),i("blur",{value:t})}function k(e){i("focus",e.detail)}function E(e){B(),u=setTimeout((()=>{I(e),E(e)}),250)}function $(e){n.longPress&&(B(),u=setTimeout((()=>{I(e),E(e)}),600))}function A(){n.longPress&&B()}function B(){u&&(clearTimeout(u),u=null)}return p((()=>n.modelValue),(e=>{s.value=O(e)})),p([()=>n.max,()=>n.min,()=>n.precision],(()=>{const e=x(s.value);s.value=O(e)})),(e,t)=>{const n=g,i=y;return f(),m(n,{class:N(`wui-input-number ${e.customClass} ${e.disabled?"is-disabled":""} ${e.withoutInput?"is-without-input":""}`),style:_(e.customStyle)},{default:b((()=>[h(n,{class:N("wui-input-number__action "+(a.value||e.disableMinus?"is-disabled":"")),onClick:t[0]||(t[0]=e=>I("sub")),onTouchstart:t[1]||(t[1]=e=>$("sub")),onTouchend:w(A,["stop"])},{default:b((()=>[h(F,{name:"decrease","custom-class":"wui-input-number__action-icon"})])),_:1},8,["class"]),e.withoutInput?v("",!0):(f(),m(n,{key:0,class:"wui-input-number__inner",onClick:t[2]||(t[2]=w((()=>{}),["stop"]))},{default:b((()=>[h(i,{class:"wui-input-number__input",style:_(""+(e.inputWidth?"width: "+e.inputWidth:"")),type:e.inputType,"input-mode":e.precision?"decimal":"numeric",disabled:e.disabled||e.disableInput,value:String(s.value),placeholder:e.placeholder,"adjust-position":e.adjustPosition,onInput:W,onFocus:k,onBlur:C},null,8,["style","type","input-mode","disabled","value","placeholder","adjust-position"]),h(n,{class:"wui-input-number__input-border"})])),_:1})),h(n,{class:N("wui-input-number__action "+(r.value||e.disablePlus?"is-disabled":"")),onClick:t[3]||(t[3]=e=>I("add")),onTouchstart:t[4]||(t[4]=e=>$("add")),onTouchend:w(A,["stop"])},{default:b((()=>[h(F,{name:"add","custom-class":"wui-input-number__action-icon"})])),_:1},8,["class"])])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-e3e4d57a"]]);export{A as _};
