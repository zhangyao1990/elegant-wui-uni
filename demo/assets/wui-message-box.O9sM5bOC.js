var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,r=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&l(e,o,t[o]);if(a)for(var o of a(t))n.call(t,o)&&l(e,o,t[o]);return e},i=(e,a)=>t(e,o(a));import{G as u,r as c,a1 as p,d as m,c as d,I as f,z as w,a as y,g as h,w as _,h as b,i as x,s as C,x as g,k as B,t as P,n as V,A as v,F as k,u as z,V as E}from"./index-7V_Oz7o2.js";import{I as O,l as T,c as I,A as j,B as M,n as S,w as $,D as R,C as A,a as D}from"./page-wraper.XTDu10FG.js";import{_ as G}from"./wui-button.CpEmAov2.js";import{_ as N}from"./wui-input.C94vwexm.js";import{u as U}from"./useTranslate.NU6YixkU.js";const F="__MESSAGE_OPTION__",H=Symbol("None"),q={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function J(e=""){const t=e?F+e:F,o=u(t,c(H));o.value===H&&(o.value=q,p(t,o));const a=e=>t=>{const o=O({type:e},"string"==typeof t?{title:t}:t);return"confirm"===o.type||"prompt"===o.type?o.showCancelButton=!0:o.showCancelButton=!1,s(o)},s=e=>new Promise(((t,a)=>{const s=O(q,"string"==typeof e?{title:e}:e);o.value=O(s,{show:!0,success:e=>{i(),t(e)},fail:e=>{i(),a(e)}})})),n=a("alert"),l=a("confirm"),r=a("prompt"),i=()=>{o.value!==H&&(o.value.show=!1)};return{show:s,alert:n,confirm:l,prompt:r,close:i}}const K=i(r({},I),{selector:T("")}),L=D(m(i(r({},{name:"wui-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:K,setup(e){const t=e,{translate:o}=U("message-box"),a=d((()=>`wui-message-box__container ${t.customClass}`)),s=d((()=>`wui-message-box__body ${i.title?"":"is-no-title"} ${"prompt"===i.type?"is-prompt":""}`)),n=(l=t.selector)?`${F}${l}`:F;var l;const r=u(n,c(q)),i=f({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),p=d((()=>{const e=j({block:!0},S(i.confirmButtonProps)?M(i.confirmButtonProps,A):{});return e.customClass=`${e.customClass||""} wui-message-box__actions-btn`,e})),m=d((()=>{const e=j({block:!0,type:"info"},S(i.cancelButtonProps)?M(i.cancelButtonProps,A):{});return e.customClass=`${e.customClass||""} wui-message-box__actions-btn`,e}));function O(e){if(("modal"!==e||i.closeOnClickModal)&&("prompt"!==i.type||"confirm"!==e||function(){if(i.inputPattern&&!i.inputPattern.test(String(i.inputValue)))return i.showErr=!0,!1;if("function"==typeof i.inputValidate){if(!i.inputValidate(i.inputValue))return i.showErr=!0,!1}return i.showErr=!1,!0}()))switch(e){case"confirm":i.beforeConfirm?i.beforeConfirm({resolve:t=>{t&&T({action:e,value:i.inputValue})}}):T({action:e,value:i.inputValue});break;case"cancel":I({action:e});break;default:I({action:"modal"})}}function T(e){i.show=!1,R(i.success)&&i.success(e)}function I(e){i.show=!1,R(i.fail)&&i.fail(e)}function D({value:e}){""!==e?i.inputValue=e:i.showErr=!1}return w((()=>r.value),(e=>{var t;(t=e)&&(i.title=S(t.title)?t.title:"",i.showCancelButton=!!S(t.showCancelButton)&&t.showCancelButton,i.show=t.show,i.closeOnClickModal=t.closeOnClickModal,i.confirmButtonText=t.confirmButtonText,i.cancelButtonText=t.cancelButtonText,i.msg=t.msg,i.type=t.type,i.inputType=t.inputType,i.inputSize=t.inputSize,i.inputValue=t.inputValue,i.inputPlaceholder=t.inputPlaceholder,i.inputPattern=t.inputPattern,i.inputValidate=t.inputValidate,i.success=t.success,i.fail=t.fail,i.beforeConfirm=t.beforeConfirm,i.inputError=t.inputError,i.showErr=t.showErr,i.zIndex=t.zIndex,i.lazyRender=t.lazyRender,i.confirmButtonProps=t.confirmButtonProps,i.cancelButtonProps=t.cancelButtonProps)}),{deep:!0,immediate:!0}),w((()=>i.show),(e=>{!1===!!e&&(i.showErr=!1)}),{deep:!0,immediate:!0}),(e,t)=>{const n=x;return h(),y(n,null,{default:_((()=>[b($,{transition:"zoom-in",modelValue:i.show,"onUpdate:modelValue":t[3]||(t[3]=e=>i.show=e),"close-on-click-modal":i.closeOnClickModal,"lazy-render":i.lazyRender,"custom-class":"wui-message-box",onClickModal:t[4]||(t[4]=e=>O("modal")),"z-index":i.zIndex,duration:200},{default:_((()=>[b(n,{class:C(a.value)},{default:_((()=>[b(n,{class:C(s.value)},{default:_((()=>[i.title?(h(),y(n,{key:0,class:"wui-message-box__title"},{default:_((()=>[B(P(i.title),1)])),_:1})):g("",!0),b(n,{class:"wui-message-box__content"},{default:_((()=>["prompt"===i.type?(h(),V(k,{key:0},[b(N,{modelValue:i.inputValue,"onUpdate:modelValue":t[0]||(t[0]=e=>i.inputValue=e),type:i.inputType,size:i.inputSize,placeholder:i.inputPlaceholder,onInput:D},null,8,["modelValue","type","size","placeholder"]),i.showErr?(h(),y(n,{key:0,class:"wui-message-box__input-error"},{default:_((()=>[B(P(i.inputError||z(o)("inputNoValidate")),1)])),_:1})):g("",!0)],64)):g("",!0),v(e.$slots,"default",{},(()=>[B(P(i.msg),1)]),!0)])),_:3})])),_:3},8,["class"]),b(n,{class:C("wui-message-box__actions "+(i.showCancelButton?"wui-message-box__flex":"wui-message-box__block"))},{default:_((()=>[i.showCancelButton?(h(),y(G,E({key:0},m.value,{onClick:t[1]||(t[1]=e=>O("cancel"))}),{default:_((()=>[B(P(i.cancelButtonText||z(o)("cancel")),1)])),_:1},16)):g("",!0),b(G,E(p.value,{onClick:t[2]||(t[2]=e=>O("confirm"))}),{default:_((()=>[B(P(i.confirmButtonText||z(o)("confirm")),1)])),_:1},16)])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])])),_:3})}}})),[["__scopeId","data-v-e55a1ef2"]]);export{L as _,J as u};
