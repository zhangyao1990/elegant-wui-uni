var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&s(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{d as u,H as c,r as d,c as m,z as p,a as y,g as f,w as v,n as b,F as g,p as h,i as w,B as _,h as C,x,K as k,s as O}from"./index-7V_Oz7o2.js";import{c as j,k as z,l as I,m as P,b as A,p as H,a as V}from"./page-wraper.XTDu10FG.js";const E=i(n({},j),{num:P(5),modelValue:{type:[String,Number,null],default:null},readonly:z(!1),size:I("16px"),space:I("4px"),color:I("#E8E8E8"),activeColor:{type:[String,Array],default:"linear-gradient(180deg, rgba(255,238,0,1) 0%,rgba(250,176,21,1) 100%)"},icon:I("star-on"),activeIcon:I("star-on"),disabled:z(!1),disabledColor:I("linear-gradient(315deg, rgba(177,177,177,1) 0%,rgba(199,199,199,1) 100%)"),allowHalf:z(!1)}),S=V(u(i(n({},{name:"wui-rate",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:E,emits:["update:modelValue","change"],setup(e,{emit:a}){const{proxy:t}=c(),l=e,r=a,o=d([]),s=d(""),n=m((()=>`background:${l.color};`)),i=m((()=>`background:${l.disabled?l.disabledColor:s.value};`));p((()=>l.activeColor),(e=>{Array.isArray(e)&&!e.length&&console.error("activeColor cannot be an empty array"),j()}),{immediate:!0,deep:!0}),p([()=>l.num,()=>l.modelValue],(()=>{!function(){const{modelValue:e,num:a,allowHalf:t}=l;if(null===e||!a)return;if("number"!=typeof e)return void console.error("[Elegant Wui Uni] error(wui-rate): the value of wui-rate should be a number");const r=[],s=Math.floor(e);for(let l=0;l<a;l++)l<s?r.push("100%"):l===s&&t&&e%1!=0?r.push("50%"):r.push("0");o.value=r,j()}()}),{immediate:!0,deep:!0});const u=e=>"0"!==e;function j(){const{activeColor:e,modelValue:a,num:t}=l;let r="";r=Array.isArray(e)&&e.length?Number(a)<=.6*t||!e[1]?e[0]:e[1]:e,s.value=r}function z(e,a){if(l.readonly||l.disabled)return;const t=a?e+.5:e+1;r("update:modelValue",t),r("change",{value:t})}function I(e){return a=this,r=null,o=function*(){const{clientX:a}=e.touches[0],r=yield H(".wui-rate__item",!0,t),o=Array.from(r).findIndex((e=>a>=e.left&&a<=e.right));if(-1!==o){const e=r[o],t=e.width,s=l.allowHalf&&a-e.left<t/2;(s?o+.5:o+1)>=.5&&z(o,s)}},new Promise(((e,t)=>{var l=e=>{try{n(o.next(e))}catch(a){t(a)}},s=e=>{try{n(o.throw(e))}catch(a){t(a)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,s);n((o=o.apply(a,r)).next())}));var a,r,o}return(e,a)=>{const t=w;return f(),y(t,{class:O(`wui-rate ${e.customClass}`),style:_(e.customStyle),onTouchmove:I},{default:v((()=>[(f(!0),b(g,null,h(o.value,((a,r)=>(f(),y(t,{key:r,"data-index":r,style:_({"margin-right":r==o.value.length-1?0:e.space}),class:"wui-rate__item"},{default:v((()=>[C(A,{"custom-class":"wui-rate__item-star",name:u(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"100%"===a?i.value:n.value,onClick:e=>z(r,!1)},null,8,["name","size","custom-style","onClick"]),l.allowHalf?(f(),y(t,{key:0,class:"wui-rate__item-half",onClick:k((e=>z(r,!0)),["stop"])},{default:v((()=>[C(A,{"custom-class":"wui-rate__item-star",name:u(a)?e.activeIcon:e.icon,size:e.size,"custom-style":"0"!==a?i.value:n.value},null,8,["name","size","custom-style"])])),_:2},1032,["onClick"])):x("",!0)])),_:2},1032,["data-index","style"])))),128))])),_:1},8,["class","style"])}}})),[["__scopeId","data-v-98349161"]]);export{S as _};
