var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,t=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,r=(e,a)=>{for(var l in a||(a={}))c.call(a,l)&&t(e,l,a[l]);if(s)for(var l of s(a))u.call(a,l)&&t(e,l,a[l]);return e},o=(e,s)=>a(e,l(s)),n=(e,a,l)=>new Promise(((s,c)=>{var u=e=>{try{r(l.next(e))}catch(a){c(a)}},t=e=>{try{r(l.throw(e))}catch(a){c(a)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(u,t);r((l=l.apply(e,a)).next())}));import{d as i,r as d,z as h,v,c as f,a as p,g as m,w as y,h as _,A as b,x as w,i as g,B as x,D as C,s as k,k as j,t as O,u as S,a6 as V}from"./index-7V_Oz7o2.js";import{l as P,k as $,m as I,c as L,o as T,y as W,b as B,a as D}from"./page-wraper.XTDu10FG.js";import{u as z}from"./useTranslate.NU6YixkU.js";const A=o(r({},L),{customInputClass:P(""),modelValue:P(""),useSuffixSlot:$(!1),placeholder:String,cancelTxt:String,light:$(!1),hideCancel:$(!1),disabled:$(!1),maxlength:I(-1),placeholderLeft:$(!1),focus:$(!1),focusWhenClear:$(!1),placeholderStyle:String,placeholderClass:P("")}),E=D(i(o(r({},{name:"wui-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:A,emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:a}){const l=e,s=a,{translate:c}=z("search"),u=d(!1),t=d(!1),r=d(""),o=d(!0),i=d(!1);h((()=>l.modelValue),(e=>{r.value=e,e&&(t.value=!0)}),{immediate:!0}),h((()=>l.focus),(e=>{if(e){if(l.disabled)return;L()}})),v((()=>{l.focus&&L()}));const P=f((()=>`wui-search  ${l.light?"is-light":""}  ${l.hideCancel?"is-without-cancel":""} ${l.customClass}`)),$=f((()=>{const e={display:""===r.value&&o.value?"flex":"none"};return T(e)}));function I(e){return n(this,null,(function*(){t.value=e,yield W(),u.value=e}))}function L(){return n(this,null,(function*(){l.disabled||(yield W(100),o.value=!1,I(!0))}))}function D(e){r.value=e.detail.value,s("update:modelValue",e.detail.value),s("change",{value:e.detail.value})}function A(){return n(this,null,(function*(){r.value="",l.focusWhenClear&&(i.value=!0,u.value=!1),yield W(),l.focusWhenClear?(o.value=!1,I(!0)):(o.value=!0,I(!1)),s("change",{value:""}),s("update:modelValue",""),s("clear")}))}function E({detail:{value:e}}){s("search",{value:e})}function F(){o.value=!1,s("focus",{value:r.value})}function G(){return n(this,null,(function*(){yield W(150),i.value?i.value=!1:(o.value=!r.value,t.value=!o.value,u.value=!1,s("blur",{value:r.value}))}))}function H(){s("cancel",{value:r.value})}return(e,a)=>{const l=C,s=g,o=V;return m(),p(s,{class:k(P.value),style:x(e.customStyle)},{default:y((()=>[_(s,{class:"wui-search__block"},{default:y((()=>[b(e.$slots,"prefix",{},void 0,!0),_(s,{class:"wui-search__field"},{default:y((()=>[e.placeholderLeft?w("",!0):(m(),p(s,{key:0,style:x($.value),class:"wui-search__cover",onClick:L},{default:y((()=>[_(B,{name:"search","custom-class":"wui-search__search-icon"}),_(l,{class:k(`wui-search__placeholder-txt ${e.placeholderClass}`)},{default:y((()=>[j(O(e.placeholder||S(c)("search")),1)])),_:1},8,["class"])])),_:1},8,["style"])),t.value||r.value||e.placeholderLeft?(m(),p(B,{key:1,name:"search","custom-class":"wui-search__search-left-icon"})):w("",!0),t.value||r.value||e.placeholderLeft?(m(),p(o,{key:2,placeholder:e.placeholder||S(c)("search"),"placeholder-class":`wui-search__placeholder-txt ${e.placeholderClass}`,"placeholder-style":e.placeholderStyle,"confirm-type":"search",modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),class:k(["wui-search__input",e.customInputClass]),onFocus:F,onInput:D,onBlur:G,onConfirm:E,disabled:e.disabled,maxlength:e.maxlength,focus:u.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):w("",!0),r.value?(m(),p(B,{key:3,"custom-class":"wui-search__clear wui-search__clear-icon",name:"error-fill",onClick:A})):w("",!0)])),_:1})])),_:3}),e.hideCancel?w("",!0):b(e.$slots,"suffix",{key:0},(()=>[_(s,{class:"wui-search__cancel",onClick:H},{default:y((()=>[j(O(e.cancelTxt||S(c)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-2fee3cd3"]]);export{E as _};
