var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(a,l,u)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[l]=u,i=(e,a)=>{for(var l in a||(a={}))s.call(a,l)&&r(e,l,a[l]);if(u)for(var l of u(a))t.call(a,l)&&r(e,l,a[l]);return e},o=(e,u)=>a(e,l(u));import{d as n,r as d,H as v,c,z as p,v as b,a as _,g as m,w,x as f,h,i as y,s as g,k as x,t as M,B as T,n as C,F as k,A as j}from"./index-CnRAlpd-.js";import{c as O,m as $,l as V,k as P,E as L,M as A,o as I,p as S,Q as F,P as N,a as B}from"./page-wraper.DMME2CXH.js";import{u as E}from"./useTouch.BqiP_qH2.js";const H=o(i({},O),{customMinClass:V(""),customMaxClass:V(""),hideMinMax:P(!1),hideLabel:P(!1),disabled:P(!1),inactiveColor:V("#e5e5e5"),activeColor:V(""),max:$(100),min:$(0),step:$(1),modelValue:{type:[Number,Array],default:0}}),z=B(n(o(i({},{name:"wui-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:H,emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{expose:a,emit:l}){const u=e,s=l,t=d(`sliderBarWrapperId${L()}`),r=E(),i=d(0),{proxy:o}=v(),n=d(0),O=d(0),$=c((()=>u.min)),V=c((()=>u.max)),P=c((()=>u.step<=0?(console.warn("[elegant-wui-uni] warning(wui-slider): step must be greater than 0"),1):u.step)),B=d(0),H=d(Y()),z=c((()=>A(H.value))),D=c((()=>V.value-$.value)),G=c((()=>z.value?H.value[0]:H.value)),Q=c((()=>z.value?H.value[1]:0)),W=c((()=>`wui-slider ${u.hideLabel?"":"wui-slider__has-label"} ${u.disabled?"wui-slider--disabled":""} ${u.customClass}`)),X=c((()=>I({visibility:u.disabled?"hidden":"visible"}))),q=c((()=>{const e={};return u.inactiveColor&&(e.background=u.inactiveColor),I(e)})),J=c((()=>{const e={};if(0===D.value)return I(e);if(z.value){const[a,l]=Z(H.value);e.width=100*(l-a)/D.value+"%",e.left=100*(a-$.value)/D.value+"%"}else e.width=100*(H.value-$.value)/D.value+"%",e.left="0";return u.activeColor&&(e.background=u.activeColor),I(e)}));function K(){return u.disabled}function R(e,a,l){return Math.min(Math.max(e,a),l)}function U(){S(`#${t.value}`,!1,o).then((e=>{n.value=Number(e.width),O.value=Number(e.left)}))}function Y(){return A(u.modelValue)?Z(u.modelValue):R(u.modelValue,$.value,V.value)}function Z(e){if(!Array.isArray(e)||e.length<2)return console.warn("[elegant-wui-uni] warning(wui-slider): range value should be an array with at least 2 elements"),[$.value,V.value];const a=R(e[0],$.value,V.value),l=R(e[1],$.value,V.value);return a>l?[l,a]:[a,l]}function ee(e){e=R(e,$.value,V.value);const a=Math.round((e-$.value)/P.value);return parseFloat(($.value+a*P.value).toFixed(10))}function ae(e,a){K()||(i.value=a,r.touchStart(e),B.value=F(H.value),s("dragstart",{value:H.value}))}function le(e){if(K())return;r.touchMove(e);const a=r.deltaX.value/n.value*D.value;let l=F(B.value);A(l)?l[i.value]+=a:l+=a,function(e){let a=F(e);a=A(e)?Z(e).map((e=>ee(e))):ee(e),N(a,H.value)||(H.value=a)}(l),s("dragmove",{value:H.value})}function ue(){K()||s("dragend",{value:H.value})}return p((()=>u.modelValue),(e=>{N(e,H.value)||(H.value=Y())}),{deep:!0}),p(H,(e=>{s("update:modelValue",e)})),b((()=>{U()})),a({initSlider:U}),(e,a)=>{const l=y;return m(),_(l,{class:g(W.value),style:T(e.customStyle)},{default:w((()=>[e.hideMinMax?f("",!0):(m(),_(l,{key:0,class:g(`wui-slider__label-min ${e.customMinClass}`)},{default:w((()=>[x(M($.value),1)])),_:1},8,["class"])),h(l,{class:"wui-slider__bar-wrapper",style:T(q.value),id:t.value},{default:w((()=>[h(l,{class:"wui-slider__bar",style:T(J.value)},{default:w((()=>[z.value?(m(),C(k,{key:0},[h(l,{class:"wui-slider__button-wrapper wui-slider__button-wrapper--left",style:T(X.value),onTouchstart:a[0]||(a[0]=e=>ae(e,0)),onTouchmove:le,onTouchend:ue,onTouchcancel:ue},{default:w((()=>[e.hideLabel?f("",!0):(m(),_(l,{key:0,class:"wui-slider__label"},{default:w((()=>[x(M(G.value),1)])),_:1})),h(l,{class:"wui-slider__button"},{default:w((()=>[j(e.$slots,"button",{},void 0,!0)])),_:3})])),_:3},8,["style"]),h(l,{class:"wui-slider__button-wrapper wui-slider__button-wrapper--right",style:T(X.value),onTouchstart:a[1]||(a[1]=e=>ae(e,1)),onTouchmove:le,onTouchend:ue,onTouchcancel:ue},{default:w((()=>[e.hideLabel?f("",!0):(m(),_(l,{key:0,class:"wui-slider__label"},{default:w((()=>[x(M(Q.value),1)])),_:1})),h(l,{class:"wui-slider__button"})])),_:1},8,["style"])],64)):(m(),_(l,{key:1,class:"wui-slider__button-wrapper",style:T(X.value),onTouchstart:a[2]||(a[2]=e=>ae(e,0)),onTouchmove:le,onTouchend:ue,onTouchcancel:ue},{default:w((()=>[e.hideLabel?f("",!0):(m(),_(l,{key:0,class:"wui-slider__label"},{default:w((()=>[x(M(G.value),1)])),_:1})),h(l,{class:"wui-slider__button"})])),_:1},8,["style"]))])),_:3},8,["style"])])),_:3},8,["style","id"]),e.hideMinMax?f("",!0):(m(),_(l,{key:1,class:g(`wui-slider__label-max ${e.customMaxClass}`)},{default:w((()=>[x(M(V.value),1)])),_:1},8,["class"]))])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-14d176a2"]]);export{z as _};
