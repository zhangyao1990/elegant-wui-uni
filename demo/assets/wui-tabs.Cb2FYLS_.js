var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,o=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&n(e,t,a[t]);if(s)for(var t of s(a))i.call(a,t)&&n(e,t,a[t]);return e},u=(e,s)=>a(e,t(s));import{d as c,H as r,c as d,r as m,z as b,a as _,g as p,w,x as f,i as v,B as y,s as h,A as g,I as x,v as k,O as I,e as $,f as C,h as S,u as N,S as T,n as j,F as L,p as P,Q as O,V,D as z,k as H,t as W}from"./index-7V_Oz7o2.js";import{l as X,m as A,k as D,z as E,t as G,c as M,d as Z,n as B,o as F,a2 as Q,a0 as R,a as q,W as J,b as K,e as U,p as Y,Z as ee}from"./page-wraper.XTDu10FG.js";import{_ as ae}from"./wui-badge.Bbz0hbKN.js";import{_ as te,a as se}from"./wui-sticky-box.CSGOAJXH.js";import{u as le}from"./useTouch.BLhMhb8z.js";import{u as ie}from"./useChildren.CE-WdV6D.js";import{u as ne}from"./useTranslate.NU6YixkU.js";const oe=Symbol("wui-tabs"),ue=u(o({},M),{modelValue:G(0),slidableNum:A(6),mapNum:A(10),mapTitle:String,sticky:D(!1),offsetTop:A(0),swipeable:D(!1),autoLineWidth:D(!1),lineWidth:E,lineHeight:E,color:X(""),inactiveColor:X(""),animated:D(!1),duration:A(300),slidable:X("auto")}),ce=u(o({},M),{name:E,title:String,disabled:D(!1),lazy:D(!0),badgeProps:Object}),re=q(c(u(o({},{name:"wui-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:ce,setup(e){const a=e,{proxy:t}=r(),{parent:s,index:l}=Z(oe),i=d((()=>!!B(s)&&s.state.activeIndex===l.value)),n=m(i.value),o=d((()=>{const e={};return i.value||B(s)&&s.props.animated||(e.display="none"),F(e)})),u=d((()=>!a.lazy||n.value||i.value));return b(i,(e=>{e&&(n.value=!0)})),b((()=>a.name),(e=>{!B(e)||Q(e)||R(e)?s&&function(e){const{name:t}=a;if(null==t||""===t)return;s&&s.children.forEach((a=>{a.$.uid!==e.$.uid&&a.name===t&&console.error(`The tab's bound value: ${t} has been used`)}))}(t):console.error("[wui design] error(wui-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),(e,a)=>{const t=v;return p(),_(t,{class:h(`wui-tab ${e.customClass}`),style:y(e.customStyle)},{default:w((()=>[u.value?(p(),_(t,{key:0,class:h(["wui-tab__body",{"wui-tab__body--inactive":!i.value}]),style:y(o.value)},{default:w((()=>[g(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):f("",!0)])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-a90fc4f3"]]),de=q(c(u(o({},{name:"wui-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"}}),{props:ue,emits:["change","disabled","click","update:modelValue"],setup(e,{expose:a,emit:t}){const s=".wui-tabs__nav-item",l=e,i=t,{translate:n}=ne("tabs"),o=x({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:u,linkChildren:c}=ie(oe);c({state:o,props:l});const{proxy:m}=r(),X=le(),A=d((()=>"always"===l.slidable||u.length>l.slidableNum)),D=d((()=>l.animated?F({left:-100*o.activeIndex+"%","transition-duration":l.duration+"ms","-webkit-transition-duration":l.duration+"ms"}):"")),E=(e,a)=>B(e.name)?e.name:a,G=(e=0,a=!1,t=!0)=>{0!==u.length&&(e=be(e),u[e].disabled||(o.activeIndex=e,t&&(q(!1===a),ue()),function(){if(!o.inited)return;const e=E(u[o.activeIndex],o.activeIndex);e!==l.modelValue&&(i("change",{index:o.activeIndex,name:e}),i("update:modelValue",e))}()))},M=J(G,100,{leading:!0});function Z(){o.mapShow?(o.animating=!1,setTimeout((()=>{o.mapShow=!1}),300)):(o.mapShow=!0,setTimeout((()=>{o.animating=!0}),100))}function q(e=!0){return a=this,t=null,i=function*(){if(!o.inited)return;const{autoLineWidth:a,lineWidth:t,lineHeight:i}=l;try{const l={};if(B(t))l.width=U(t);else if(a){const e=yield Y(".wui-tabs__nav-item-text",!0,m),a=Number(e[o.activeIndex].width);l.width=U(a)}B(i)&&(l.height=U(i),l.borderRadius=`calc(${U(i)} / 2)`);const n=yield Y(s,!0,m),u=n[o.activeIndex];let c=n.slice(0,o.activeIndex).reduce(((e,a)=>e+Number(a.width)),0)+Number(u.width)/2;c&&(l.transform=`translateX(${c}px) translateX(-50%)`,e&&(l.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),o.useInnerLine=!1,o.lineStyle=F(l))}catch(n){console.error("[wui design] error(wui-tabs): update line style failed",n)}},new Promise(((e,s)=>{var l=e=>{try{o(i.next(e))}catch(a){s(a)}},n=e=>{try{o(i.throw(e))}catch(a){s(a)}},o=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,n);o((i=i.apply(a,t)).next())}));var a,t,i}function ue(){o.inited&&Promise.all([Y(s,!0,m),Y(".wui-tabs__nav-container",!1,m)]).then((([e,a])=>{const t=e[o.activeIndex],s=e.slice(0,o.activeIndex).reduce(((e,a)=>e+a.width),0)-(a.width-Number(t.width))/2;s===o.scrollLeft?o.scrollLeft=s+Math.random()/1e4:o.scrollLeft=s}))}function ce(e){if(void 0===e)return;const{disabled:a}=u[e],t=E(u[e],e);a?i("disabled",{index:e,name:t}):(o.mapShow&&Z(),M(e),i("click",{index:e,name:t}))}function re(e){l.swipeable&&X.touchStart(e)}function de(e){l.swipeable&&X.touchMove(e)}function me(){if(!l.swipeable)return;const{direction:e,deltaX:a,offsetX:t}=X;"horizontal"===e.value&&t.value>=50&&(a.value>0&&0!==o.activeIndex?M(o.activeIndex-1):a.value<0&&o.activeIndex!==u.length-1&&M(o.activeIndex+1))}function be(e){if(Q(e)&&e>=u.length&&(console.error("[wui design] warning(wui-tabs): the type of tabs' value is Number shouldn't be less than its children"),e=0),R(e)){const a=u.findIndex((a=>a.name===e));e=-1===a?0:a}return e}return b((()=>l.modelValue),(e=>{Q(e)||R(e)||console.error("[wui design] error(wui-tabs): the type of value should be number or string"),""!==e&&B(e)||console.error("[wui design] error(wui-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof e&&e<0&&console.error("[wui design] error(wui-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),b((()=>l.modelValue),(e=>{const a=be(e);M(e,!1,a!==o.activeIndex)}),{immediate:!1,deep:!0}),b((()=>u.length),(()=>{o.inited&&I((()=>{M(l.modelValue)}))})),b((()=>l.slidableNum),(e=>{ee(e,"slidableNum")})),b((()=>l.mapNum),(e=>{ee(e,"mapNum")})),k((()=>{o.inited=!0,I((()=>{G(l.modelValue,!0),o.useInnerLine=!0}))})),a({setActive:M,scrollIntoView:ue,updateLineStyle:q}),(e,a)=>{const t=z,s=$(C("wui-badge"),ae),l=v,i=T;return e.sticky?(p(),_(se,{key:0},{default:w((()=>[S(l,{class:h(`wui-tabs ${e.customClass} ${A.value?"is-slide":""} ${e.mapNum<N(u).length&&0!==e.mapNum?"is-map":""}`),style:y(e.customStyle)},{default:w((()=>[S(te,{"offset-top":e.offsetTop},{default:w((()=>[S(l,{class:"wui-tabs__nav wui-tabs__nav--sticky"},{default:w((()=>[S(l,{class:"wui-tabs__nav--wrap"},{default:w((()=>[S(i,{"scroll-x":A.value,"scroll-with-animation":"","scroll-left":o.scrollLeft},{default:w((()=>[S(l,{class:"wui-tabs__nav-container"},{default:w((()=>[(p(!0),j(L,null,P(N(u),((a,i)=>(p(),_(l,{onClick:e=>ce(i),key:i,class:h(`wui-tabs__nav-item  ${o.activeIndex===i?"is-active":""} ${a.disabled?"is-disabled":""}`),style:y(o.activeIndex===i?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:w((()=>[a.badgeProps?(p(),_(s,O(V({key:0},a.badgeProps)),{default:w((()=>[S(t,{class:"wui-tabs__nav-item-text"},{default:w((()=>[H(W(a.title),1)])),_:2},1024)])),_:2},1040)):(p(),_(t,{key:1,class:"wui-tabs__nav-item-text"},{default:w((()=>[H(W(a.title),1)])),_:2},1024)),o.activeIndex===i&&o.useInnerLine?(p(),_(l,{key:2,class:"wui-tabs__line wui-tabs__line--inner"})):f("",!0)])),_:2},1032,["onClick","class","style"])))),128)),S(l,{class:"wui-tabs__line",style:y(o.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),e.mapNum<N(u).length&&0!==e.mapNum?(p(),_(l,{key:0,class:"wui-tabs__map"},{default:w((()=>[S(l,{class:h("wui-tabs__map-btn  "+(o.animating?"is-open":"")),onClick:Z},{default:w((()=>[S(l,{class:h("wui-tabs__map-arrow  "+(o.animating?"is-open":""))},{default:w((()=>[S(K,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),S(l,{class:"wui-tabs__map-header",style:y(`${o.mapShow?"":"display:none;"}  ${o.animating?"opacity:1;":""}`)},{default:w((()=>[H(W(e.mapTitle||N(n)("all")),1)])),_:1},8,["style"]),S(l,{class:h("wui-tabs__map-body  "+(o.animating?"is-open":"")),style:y(o.mapShow?"":"display:none")},{default:w((()=>[(p(!0),j(L,null,P(N(u),((a,t)=>(p(),_(l,{class:"wui-tabs__map-nav-item",key:t,onClick:e=>ce(t)},{default:w((()=>[S(l,{class:h(`wui-tabs__map-nav-btn ${o.activeIndex===t?"is-active":""}  ${a.disabled?"is-disabled":""}`),style:y(o.activeIndex===t?e.color?"color:"+e.color+";border-color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:w((()=>[H(W(a.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):f("",!0)])),_:1})])),_:1},8,["offset-top"]),S(l,{class:"wui-tabs__container",onTouchstart:re,onTouchmove:de,onTouchend:me,onTouchcancel:me},{default:w((()=>[S(l,{class:h(["wui-tabs__body",e.animated?"is-animated":""]),style:y(D.value)},{default:w((()=>[g(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),S(l,{class:"wui-tabs__mask",style:y(`${o.mapShow?"":"display:none;"} ${o.animating?"opacity:1;":""}`),onClick:Z},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(p(),_(l,{key:1,class:h(`wui-tabs ${e.customClass} ${A.value?"is-slide":""} ${e.mapNum<N(u).length&&0!==e.mapNum?"is-map":""}`)},{default:w((()=>[S(l,{class:"wui-tabs__nav"},{default:w((()=>[S(l,{class:"wui-tabs__nav--wrap"},{default:w((()=>[S(i,{"scroll-x":A.value,"scroll-with-animation":"","scroll-left":o.scrollLeft},{default:w((()=>[S(l,{class:"wui-tabs__nav-container"},{default:w((()=>[(p(!0),j(L,null,P(N(u),((a,i)=>(p(),_(l,{onClick:e=>ce(i),key:i,class:h(`wui-tabs__nav-item ${o.activeIndex===i?"is-active":""} ${a.disabled?"is-disabled":""}`),style:y(o.activeIndex===i?e.color?"color:"+e.color:"":e.inactiveColor?"color:"+e.inactiveColor:"")},{default:w((()=>[a.badgeProps?(p(),_(s,V({key:0,"custom-class":"wui-tabs__nav-item-badge"},a.badgeProps),{default:w((()=>[S(t,{class:"wui-tabs__nav-item-text"},{default:w((()=>[H(W(a.title),1)])),_:2},1024)])),_:2},1040)):(p(),_(t,{key:1,class:"wui-tabs__nav-item-text"},{default:w((()=>[H(W(a.title),1)])),_:2},1024)),o.activeIndex===i&&o.useInnerLine?(p(),_(l,{key:2,class:"wui-tabs__line wui-tabs__line--inner"})):f("",!0)])),_:2},1032,["onClick","class","style"])))),128)),S(l,{class:"wui-tabs__line",style:y(o.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),e.mapNum<N(u).length&&0!==e.mapNum?(p(),_(l,{key:0,class:"wui-tabs__map"},{default:w((()=>[S(l,{class:"wui-tabs__map-btn",onClick:Z},{default:w((()=>[S(l,{class:h("wui-tabs__map-arrow "+(o.animating?"is-open":""))},{default:w((()=>[S(K,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),S(l,{class:"wui-tabs__map-header",style:y(`${o.mapShow?"":"display:none;"}  ${o.animating?"opacity:1;":""}`)},{default:w((()=>[H(W(e.mapTitle||N(n)("all")),1)])),_:1},8,["style"]),S(l,{class:h("wui-tabs__map-body "+(o.animating?"is-open":"")),style:y(o.mapShow?"":"display:none")},{default:w((()=>[(p(!0),j(L,null,P(N(u),((e,a)=>(p(),_(l,{class:"wui-tabs__map-nav-item",key:a,onClick:e=>ce(a)},{default:w((()=>[S(l,{class:h(`wui-tabs__map-nav-btn ${o.activeIndex===a?"is-active":""}  ${e.disabled?"is-disabled":""}`)},{default:w((()=>[H(W(e.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):f("",!0)])),_:1}),S(l,{class:"wui-tabs__container",onTouchstart:re,onTouchmove:de,onTouchend:me,onTouchcancel:me},{default:w((()=>[S(l,{class:h(["wui-tabs__body",e.animated?"is-animated":""]),style:y(D.value)},{default:w((()=>[g(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),S(l,{class:"wui-tabs__mask",style:y(`${o.mapShow?"":"display:none;"}  ${o.animating?"opacity:1":""}`),onClick:Z},null,8,["style"])])),_:3},8,["class"]))}}})),[["__scopeId","data-v-154a3bb3"]]);export{re as _,de as a};
