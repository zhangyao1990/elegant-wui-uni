var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,s=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,i=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&s(e,l,a[l]);if(r)for(var l of r(a))t.call(a,l)&&s(e,l,a[l]);return e},n=(e,r)=>a(e,l(r)),u=(e,a,l)=>new Promise(((r,o)=>{var t=e=>{try{i(l.next(e))}catch(a){o(a)}},s=e=>{try{i(l.throw(e))}catch(a){o(a)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(t,s);i((l=l.apply(e,a)).next())}));import{d as c,a8 as d,c as p,r as f,z as m,Z as h,a as g,g as v,w as b,x as y,h as x,i as w,B as _,s as $,A as C,D as k,k as S,t as j,af as P}from"./index-CnRAlpd-.js";import{c as O,l as T,k as V,J as W,m as I,t as B,n as E,N as H,d as L,O as q,o as z,b as A,y as D,a as F}from"./page-wraper.DMME2CXH.js";import{u as K}from"./useTranslate.DCsJG8gA.js";const M=n(i({},O),{customTextareaContainerClass:T(""),customTextareaClass:T(""),customLabelClass:T(""),modelValue:B(""),placeholder:String,placeholderStyle:String,placeholderClass:T(""),disabled:V(!1),maxlength:I(-1),autoFocus:V(!1),focus:V(!1),autoHeight:V(!1),fixed:V(!1),cursorSpacing:I(0),cursor:I(-1),confirmType:String,confirmHold:V(!1),showConfirmBar:V(!0),selectionStart:I(-1),selectionEnd:I(-1),adjustPosition:V(!0),disableDefaultPadding:V(!1),holdKeyboard:V(!1),showPassword:V(!1),clearable:V(!1),readonly:V(!1),prefixIcon:String,showWordLimit:V(!1),label:String,labelWidth:T(""),size:String,error:V(!1),center:V(!1),noBorder:V(!1),required:V(!1),prop:T(""),rules:W(),clearTrigger:T("always"),focusWhenClear:V(!0),ignoreCompositionEvent:V(!0),inputmode:T("text")}),G=F(c(n(i({},{name:"wui-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"}}),{props:M,emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(e,{emit:a}){const{translate:l}=K("textarea"),r=e,o=a,t=d(),s=p((()=>E(r.placeholder)?r.placeholder:l("placeholder"))),i=f(!1),n=f(!1),c=f(!1),O=f(""),T=H();m((()=>r.focus),(e=>{n.value=e}),{immediate:!0,deep:!0}),m((()=>r.modelValue),(e=>{O.value=E(e)?String(e):""}),{immediate:!0,deep:!0});const{parent:V}=L(q),W=p((()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:o}=r;return!(!l||a||e||!O.value||!("always"===o||"focus"===r.clearTrigger&&c.value))})),I=p((()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:o}=r;return Boolean(!e&&!a&&E(l)&&l>-1&&o)})),B=p((()=>V&&r.prop&&V.errorMessages&&V.errorMessages[r.prop]?V.errorMessages[r.prop]:"")),F=p((()=>{let e=!1;if(V&&V.props.rules){const a=V.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===r.prop&&Array.isArray(a[l])&&(e=a[l].some((e=>e.required)))}return r.required||r.rules.some((e=>e.required))||e})),M=p((()=>Array.from(String(Q(r.modelValue))).length)),G=p((()=>`wui-textarea   ${r.label||t.label?"is-cell":""} ${r.center?"is-center":""} ${T.border.value?"is-border":""} ${r.size?"is-"+r.size:""} ${r.error?"is-error":""} ${r.disabled?"is-disabled":""} ${r.autoHeight?"is-auto-height":""} ${M.value>0?"is-not-empty":""}  ${r.noBorder?"is-no-border":""} ${r.customClass}`)),J=p((()=>`wui-textarea__label ${r.customLabelClass} ${F.value?"is-required":""}`)),N=p((()=>`wui-textarea__placeholder  ${r.placeholderClass}`)),U=p((()=>`${M.value>0?"wui-textarea__count-current":""} ${M.value>r.maxlength?"is-error":""}`)),Z=p((()=>r.labelWidth?z({"min-width":r.labelWidth,"max-width":r.labelWidth}):""));function Q(e){if(null==e)return"";const{maxlength:a,showWordLimit:l}=r;return l&&-1!==a&&String(e).length>a?e.toString().substring(0,a):`${e}`}function R(){return u(this,null,(function*(){c.value=!1,O.value="",r.focusWhenClear&&(i.value=!0,n.value=!1),yield D(),r.focusWhenClear&&(n.value=!0,c.value=!0),o("update:modelValue",O.value),o("clear")}))}function X(e){return u(this,arguments,(function*({detail:e}){yield D(150),i.value?i.value=!1:(c.value=!1,o("blur",{value:O.value,cursor:e.cursor?e.cursor:null}))}))}function Y({detail:e}){c.value=!0,o("focus",e)}function ee({detail:e}){O.value=Q(O.value),o("update:modelValue",O.value),o("input",e)}function ae({detail:e}){o("keyboardheightchange",e)}function le({detail:e}){o("confirm",e)}function re({detail:e}){o("linechange",e)}function oe(){o("clickprefixicon")}return h((()=>{O.value=Q(O.value),o("update:modelValue",O.value)})),(e,a)=>{const l=w,o=k,t=P;return v(),g(l,{class:$(G.value),style:_(e.customStyle)},{default:b((()=>[e.label||e.$slots.label?(v(),g(l,{key:0,class:$(J.value),style:_(Z.value)},{default:b((()=>[e.prefixIcon||e.$slots.prefix?(v(),g(l,{key:0,class:"wui-textarea__prefix"},{default:b((()=>[e.prefixIcon&&!e.$slots.prefix?(v(),g(A,{key:0,"custom-class":"wui-textarea__icon",name:e.prefixIcon,onClick:oe},null,8,["name"])):C(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):y("",!0),x(l,{class:"wui-textarea__label-inner"},{default:b((()=>[e.label&&!e.$slots.label?(v(),g(o,{key:0},{default:b((()=>[S(j(e.label),1)])),_:1})):C(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):y("",!0),x(l,{class:$(`wui-textarea__value ${W.value?"is-suffix":""} ${e.customTextareaContainerClass} ${I.value?"is-show-limit":""}`)},{default:b((()=>[x(t,{class:$(`wui-textarea__inner ${e.customTextareaClass}`),modelValue:O.value,"onUpdate:modelValue":a[0]||(a[0]=e=>O.value=e),"show-count":!1,placeholder:s.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:n.value,"auto-focus":e.autoFocus,"placeholder-style":e.placeholderStyle,"placeholder-class":N.value,"auto-height":e.autoHeight,"cursor-spacing":e.cursorSpacing,fixed:e.fixed,cursor:e.cursor,"show-confirm-bar":e.showConfirmBar,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"disable-default-padding":e.disableDefaultPadding,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:ee,onFocus:Y,onBlur:X,onConfirm:le,onLinechange:re,onKeyboardheightchange:ae},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding","ignoreCompositionEvent","inputmode"]),B.value?(v(),g(l,{key:0,class:"wui-textarea__error-message"},{default:b((()=>[S(j(B.value),1)])),_:1})):y("",!0),r.readonly?(v(),g(l,{key:1,class:"wui-textarea__readonly-mask"})):y("",!0),x(l,{class:"wui-textarea__suffix"},{default:b((()=>[W.value?(v(),g(A,{key:0,"custom-class":"wui-textarea__clear",name:"error-fill",onClick:R})):y("",!0),I.value?(v(),g(l,{key:1,class:"wui-textarea__count"},{default:b((()=>[x(o,{class:$(U.value)},{default:b((()=>[S(j(M.value),1)])),_:1},8,["class"]),S(" /"+j(e.maxlength),1)])),_:1})):y("",!0)])),_:1})])),_:1},8,["class"])])),_:3},8,["class","style"])}}})),[["__scopeId","data-v-f0221327"]]);export{G as _};
